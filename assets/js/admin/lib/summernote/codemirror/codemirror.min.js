window.CodeMirror=function(){"use strict";var c=/gecko\/\d/i.test(navigator.userAgent),w=/MSIE \d/.test(navigator.userAgent),S=w&&(null==document.documentMode||document.documentMode<8),C=w&&(null==document.documentMode||document.documentMode<9),g=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),L=/WebKit\//.test(navigator.userAgent),t=L&&/Qt\/\d+\.\d+/.test(navigator.userAgent),e=/Chrome\//.test(navigator.userAgent),f=/Opera\//.test(navigator.userAgent),s=/Apple Computer/.test(navigator.vendor),u=/KHTML\//.test(navigator.userAgent),l=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),a=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),m=/PhantomJS/.test(navigator.userAgent),h=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),d=h||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),x=h||/Mac/.test(navigator.platform),r=/win/i.test(navigator.platform),n=f&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);(n=n&&Number(n[1]))&&15<=n&&(L=!(f=!1));var i,o=x&&(t||f&&(null==n||n<12.11)),k=c||w&&!C,p=!1,y=!1;function v(t,r){if(!(this instanceof v))return new v(t,r);for(var e in this.options=r=r||{},Te)!r.hasOwnProperty(e)&&Te.hasOwnProperty(e)&&(r[e]=Te[e]);E(r);var n="string"==typeof r.value?0:r.value.first,i=this.display=function(t,e){var r={},n=r.input=Sn("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");L?n.style.width="1000px":n.setAttribute("wrap","off");h&&(n.style.border="1px solid black");n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),r.inputDiv=Sn("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=Sn("div",[Sn("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=Sn("div",[Sn("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=Sn("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=Sn("div",null,"CodeMirror-gutter-filler"),r.lineDiv=Sn("div",null,"CodeMirror-code"),r.selectionDiv=Sn("div",null,null,"position: relative; z-index: 1"),r.cursor=Sn("div"," ","CodeMirror-cursor"),r.otherCursor=Sn("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=Sn("div",null,"CodeMirror-measure"),r.lineSpace=Sn("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=Sn("div",[Sn("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=Sn("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=Sn("div",null,null,"position: absolute; height: "+sn+"px; width: 1px;"),r.gutters=Sn("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=Sn("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=Sn("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),S&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0);t.appendChild?t.appendChild(r.wrapper):t(r.wrapper);h&&(n.style.width="0px");L||(r.scroller.draggable=!0);u?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):S&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px");return r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=e,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new un,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}(t,n);D(i.wrapper.CodeMirror=this),r.autofocus&&!d&&St(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new un},N(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var o,l=r.value;"string"==typeof l&&(l=new Cr(r.value,r.mode)),mt(this,kr)(this,l),w&&setTimeout(bn(Lt,this,!0),20),function(n){var t,r=n.display;Zr(r.scroller,"mousedown",mt(n,At)),Zr(r.scroller,"dblclick",w?mt(n,function(t){var e,r;rn(n,t)||(!(e=Tt(n,t))||Ht(n,t)||Mt(n.display,t)||(Ur(t),r=ke(Mr(n.doc,e.line).text,e),de(n.doc,r.from,r.to)))}):function(t){rn(n,t)||Ur(t)});Zr(r.lineSpace,"selectstart",function(t){Mt(r,t)||Ur(t)}),k||Zr(r.scroller,"contextmenu",function(t){jt(n,t)});function e(){n.state.focused&&setTimeout(bn(St,n),0)}function i(){null==t&&(t=setTimeout(function(){t=null,r.cachedCharWidth=r.cachedTextHeight=Nn=null,tt(n),yt(n,bn(bt,n))},100))}function o(t){rn(n,t)||n.options.onDragEvent&&n.options.onDragEvent(n,Kr(t))||Yr(t)}Zr(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Ot(n,r.scroller.scrollTop),Et(n,r.scroller.scrollLeft,!0),Qr(n,"scroll",n))}),Zr(r.scrollbarV,"scroll",function(){r.scroller.clientHeight&&Ot(n,r.scrollbarV.scrollTop)}),Zr(r.scrollbarH,"scroll",function(){r.scroller.clientHeight&&Et(n,r.scrollbarH.scrollLeft)}),Zr(r.scroller,"mousewheel",function(t){Pt(n,t)}),Zr(r.scroller,"DOMMouseScroll",function(t){Pt(n,t)}),Zr(r.scrollbarH,"mousedown",e),Zr(r.scrollbarV,"mousedown",e),Zr(r.wrapper,"scroll",function(){r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),Zr(window,"resize",i),setTimeout(function t(){for(var e=r.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(t,5e3):qr(window,"resize",i)},5e3),Zr(r.input,"keyup",mt(n,function(t){rn(n,t)||n.options.onKeyEvent&&n.options.onKeyEvent(n,Kr(t))||16==t.keyCode&&(n.doc.sel.shift=!1)})),Zr(r.input,"input",function(){w&&!C&&n.display.inputHasSelection&&(n.display.inputHasSelection=null),Ct(n)}),Zr(r.input,"keydown",mt(n,Ut)),Zr(r.input,"keypress",mt(n,Xt)),Zr(r.input,"focus",bn(_t,n)),Zr(r.input,"blur",bn(Yt,n)),n.options.dragDrop&&(Zr(r.scroller,"dragstart",function(t){!function(t,e){if(w&&(!t.state.draggingText||new Date-Dt<100))return Yr(e);if(rn(t,e)||Mt(t.display,e))return;var r=t.getSelection();{var n;e.dataTransfer.setData("Text",r),e.dataTransfer.setDragImage&&!s&&((n=Sn("img",null,null,"position: fixed; left: 0; top: 0;")).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n))}}(n,t)}),Zr(r.scroller,"dragenter",o),Zr(r.scroller,"dragover",o),Zr(r.scroller,"drop",mt(n,Wt)));function l(){r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,r.input.value=n.getSelection(),pn(r.input))}Zr(r.scroller,"paste",function(t){Mt(r,t)||(St(n),Ct(n))}),Zr(r.input,"paste",function(){var t,e;!L||n.state.fakedLastChar||new Date-n.state.lastMiddleDown<200||(t=r.input.selectionStart,e=r.input.selectionEnd,r.input.value+="$",r.input.selectionStart=t,r.input.selectionEnd=e,n.state.fakedLastChar=!0),n.state.pasteIncoming=!0,Ct(n)}),Zr(r.input,"cut",l),Zr(r.input,"copy",l),u&&Zr(r.sizer,"mouseup",function(){document.activeElement==r.input&&r.input.blur(),St(n)})}(this);try{o=document.activeElement==i.input}catch(t){}o||r.autofocus&&!d?setTimeout(bn(_t,this),20):Yt(this),mt(this,function(){for(var t in Me)Me.propertyIsEnumerable(t)&&Me[t](this,r[t],Ne);for(var e=0;e<Oe.length;++e)Oe[e](this)})()}function b(t){t.doc.mode=v.getMode(t.options,t.doc.modeOption),t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,X(t,100),t.state.modeGen++,t.curOp&&bt(t)}function M(e){var r=ut(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/ct(e.display)-3);return function(t){return tr(e.doc,t)?0:n?(Math.ceil(t.text.length/i)||1)*r:r}}function T(t){var e=t.doc,r=M(t);e.iter(function(t){var e=r(t);e!=t.height&&Nr(t,e)})}function A(t){var e=Pe[t.options.keyMap],r=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(r?" cm-keymap-"+r:""),t.state.disableInput=e.disableInput}function N(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),tt(t)}function H(t){D(t),bt(t),setTimeout(function(){F(t)},20)}function D(t){var e=t.display.gutters,r=t.options.gutters;kn(e);for(var n=0;n<r.length;++n){var i=r[n],o=e.appendChild(Sn("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&((t.display.lineGutter=o).style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none"}function W(t,e){if(0==e.height)return 0;for(var r,n=e.text.length,i=e;r=qe(i);){i=Mr(t,(o=r.find()).from.line);n+=o.from.ch-o.to.ch}for(i=e;r=Qe(i);){var o=r.find();n-=i.text.length-o.from.ch,n+=(i=Mr(t,o.to.line)).text.length-o.to.ch}return n}function O(t){var r=t.display,n=t.doc;r.maxLine=Mr(n,n.first),r.maxLineLength=W(n,r.maxLine),r.maxLineChanged=!0,n.iter(function(t){var e=W(n,t);e>r.maxLineLength&&(r.maxLineLength=e,r.maxLine=t)})}function E(t){var e=gn(t.gutters,"CodeMirror-linenumbers");-1==e&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):-1<e&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function z(t){var e=t.display,r=t.doc.height+$(e);e.sizer.style.minHeight=e.heightForcer.style.top=r+"px",e.gutters.style.height=Math.max(r,e.scroller.clientHeight-sn)+"px";var n=Math.max(r,e.scroller.scrollHeight),i=e.scroller.scrollWidth>e.scroller.clientWidth+1,o=n>e.scroller.clientHeight+1;o?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=i?On(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=n-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):(e.scrollbarV.style.display="",e.scrollbarV.firstChild.style.height="0"),i?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=o?On(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):(e.scrollbarH.style.display="",e.scrollbarH.firstChild.style.width="0"),i&&o?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=On(e.measure)+"px"):e.scrollbarFiller.style.display="",i&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=On(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",l&&0===On(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=a?"18px":"12px",e.scrollbarV.style.pointerEvents=e.scrollbarH.style.pointerEvents="none")}function I(t,e,r){var n=t.scroller.scrollTop,i=t.wrapper.clientHeight;"number"==typeof r?n=r:r&&(n=r.top,i=r.bottom-r.top),n=Math.floor(n-j(t));var o=Math.ceil(n+i);return{from:Dr(e,n),to:Dr(e,o)}}function F(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=R(e)-e.scroller.scrollLeft+t.doc.scrollLeft,n=e.gutters.offsetWidth,i=r+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var l=0,s=o.alignable;l<s.length;++l)s[l].style.left=i;t.options.fixedGutter&&(e.gutters.style.left=r+n+"px")}}function P(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function R(t){return An(t.scroller).left-An(t.sizer).left}function B(t,e,r,n){for(var i,o=t.display.showingFrom,l=t.display.showingTo,s=I(t.display,t.doc,r),a=!0;;a=!1){var u=t.display.scroller.clientWidth;if(!function(t,e,r,n){var i=t.display,o=t.doc;if(!i.wrapper.clientWidth)return i.showingFrom=i.showingTo=o.first,void(i.viewOffset=0);if(!n&&0==e.length&&r.from>i.showingFrom&&r.to<i.showingTo)return;!function(t){if(t.options.lineNumbers){var e=t.doc,r=P(t.options,e.first+e.size-1),n=t.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(Sn("div",[Sn("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l),n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",1}}}(t)||(e=[{from:o.first,to:o.first+o.size}]);var l=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=t.options.fixedGutter?l:"0";var s=1/0;if(t.options.lineNumbers)for(var a=0;a<e.length;++a)e[a].diff&&e[a].from<s&&(s=e[a].from);var u=o.first+o.size,c=Math.max(r.from-t.options.viewportMargin,o.first),h=Math.min(u,r.to+t.options.viewportMargin);i.showingFrom<c&&c-i.showingFrom<20&&(c=Math.max(o.first,i.showingFrom));i.showingTo>h&&i.showingTo-h<20&&(h=Math.min(u,i.showingTo));if(y)for(c=Hr(Je(o,Mr(o,c)));h<u&&tr(o,Mr(o,h));)++h;var f=[{from:Math.max(i.showingFrom,o.first),to:Math.min(i.showingTo,u)}];f=f[0].from>=f[0].to?[]:function(t,e){for(var r=0,n=e.length||0;r<n;++r){for(var i=e[r],o=[],l=i.diff||0,s=0,a=t.length;s<a;++s){var u=t[s];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l}))}t=o}return t}(f,e);if(y)for(a=0;a<f.length;++a)for(var d,p=f[a];d=Qe(Mr(o,p.to-1));){var g=d.find().from.line;if(!(g>p.from)){f.splice(a--,1);break}p.to=g}for(var m=0,a=0;a<f.length;++a){(p=f[a]).from<c&&(p.from=c),p.to>h&&(p.to=h),p.from>=p.to?f.splice(a--,1):m+=p.to-p.from}if(!n&&m==h-c&&c==i.showingFrom&&h==i.showingTo)return void G(t);f.sort(function(t,e){return t.from-e.from});try{var v=document.activeElement}catch(t){}m<.7*(h-c)&&(i.lineDiv.style.display="none");(function(c,t,e,h,f){var d=function(t){for(var e=t.display,r={},n={},i=e.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[t.options.gutters[o]]=i.offsetLeft,n[t.options.gutters[o]]=i.offsetWidth;return{fixedPos:R(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}(c),r=c.display,p=c.options.lineNumbers;h.length||L&&c.display.currentWheelTarget||kn(r.lineDiv);var g=r.lineDiv,m=g.firstChild;function v(t){var e=t.nextSibling;return L&&x&&c.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),e}var y=h.shift(),b=t;c.doc.iter(t,e,function(t){if(y&&y.to==b&&(y=h.shift()),tr(c.doc,t)){if(0!=t.height&&Nr(t,0),t.widgets&&m&&m.previousSibling)for(var e=0;e<t.widgets.length;++e){var r,n,i,o=t.widgets[e];o.showIfHidden&&(r=m.previousSibling,/pre/i.test(r.nodeName)&&(n=Sn("div",null,null,"position: relative"),r.parentNode.replaceChild(n,r),n.appendChild(r),r=n),i=r.appendChild(Sn("div",[o.node],"CodeMirror-linewidget")),o.handleMouseEvents||(i.ignoreEvents=!0),V(o,i,r,d))}}else if(y&&y.from<=b&&y.to>b){for(;m.lineObj!=t;)m=v(m);p&&f<=b&&m.lineNumber&&Tn(m.lineNumber,P(c.options,b)),m=m.nextSibling}else{if(t.widgets)for(var l,s=0,a=m;a&&s<20;++s,a=a.nextSibling)if(a.lineObj==t&&/div/i.test(a.nodeName)){l=a;break}var u=function(t,e,r,n,i){var o,l=dr(t,e),s=l.pre,a=e.gutterMarkers,u=t.display,c=l.bgClass?l.bgClass+" "+(e.bgClass||""):e.bgClass;if(!(t.options.lineNumbers||a||c||e.wrapClass||e.widgets))return s;if(i){for(var h,f=!(i.alignable=null),d=0,p=null,g=i.firstChild;g;g=h)if(h=g.nextSibling,/\bCodeMirror-linewidget\b/.test(g.className)){for(var m=0;m<e.widgets.length;++m){if((w=e.widgets[m]).node==g.firstChild){w.above||p||(p=g),V(w,g,i,n),++d;break}}if(m==e.widgets.length){f=!1;break}}else i.removeChild(g);i.insertBefore(s,p),f&&d==e.widgets.length&&((o=i).className=e.wrapClass||"")}o||(o=Sn("div",null,e.wrapClass,"position: relative")).appendChild(s);c&&o.insertBefore(Sn("div",null,c+" CodeMirror-linebackground"),o.firstChild);if(t.options.lineNumbers||a){var v=o.insertBefore(Sn("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),o.firstChild);if(t.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(v),!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(o.lineNumber=v.appendChild(Sn("div",P(t.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+u.lineNumInnerWidth+"px"))),a)for(var y=0;y<t.options.gutters.length;++y){var b=t.options.gutters[y],x=a.hasOwnProperty(b)&&a[b];x&&v.appendChild(Sn("div",[x],"CodeMirror-gutter-elt","left: "+n.gutterLeft[b]+"px; width: "+n.gutterWidth[b]+"px"))}}S&&(o.style.zIndex=2);if(e.widgets&&o!=i)for(var m=0,C=e.widgets;m<C.length;++m){var w,L=Sn("div",[(w=C[m]).node],"CodeMirror-linewidget");w.handleMouseEvents||(L.ignoreEvents=!0),V(w,L,o,n),w.above?o.insertBefore(L,t.options.lineNumbers&&0!=e.height?v:s):o.appendChild(L),en(w,"redraw")}return o}(c,t,b,d,l);if(u!=l)g.insertBefore(u,m);else{for(;m!=l;)m=v(m);m=m.nextSibling}u.lineObj=t}++b});for(;m;)m=v(m)})(t,c,h,f,s),i.lineDiv.style.display="",v&&document.activeElement!=v&&v.offsetHeight&&v.focus();c==i.showingFrom&&h==i.showingTo&&i.lastSizeC==i.wrapper.clientHeight||(i.lastSizeC=i.wrapper.clientHeight,X(t,400));return i.showingFrom=c,i.showingTo=h,function(t){for(var e,r=t.display,n=r.lineDiv.offsetTop,i=r.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj){var o,l;S?(o=i.offsetTop+i.offsetHeight,e=o-n,n=o):(l=An(i),e=l.bottom-l.top);var s=i.lineObj.height-e;if(e<2&&(e=ut(r)),.001<s||s<-.001){Nr(i.lineObj,e);var a=i.lineObj.widgets;if(a)for(var u=0;u<a.length;++u)a[u].height=a[u].node.offsetHeight}}}(t),G(t),!0}(t,e,s,n))break;if(i=!0,e=[],K(t),z(t),a&&t.options.lineWrapping&&u!=t.display.scroller.clientWidth)n=!0;else if(n=!1,r=r&&Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof r?r:r.top),(s=I(t.display,t.doc,r)).from>=t.display.showingFrom&&s.to<=t.display.showingTo)break}return i&&(en(t,"update",t),t.display.showingFrom==o&&t.display.showingTo==l||en(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),i}function G(t){var e=t.display.viewOffset=Wr(t,Mr(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function V(t,e,r,n){var i;t.noHScroll&&((r.alignable||(r.alignable=[])).push(e),i=n.wrapperWidth,e.style.left=n.fixedPos+"px",t.coverGutter||(i-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=i+"px"),t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function K(t){var e,r,n,i,o,l,s=t.display,a=le(t.doc.sel.from,t.doc.sel.to);a||t.options.showCursorWhenSelecting?(r=(e=t).display,n=lt(e,e.doc.sel.head,"div"),r.cursor.style.left=n.left+"px",r.cursor.style.top=n.top+"px",r.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",r.cursor.style.display="",n.other?(r.otherCursor.style.display="",r.otherCursor.style.left=n.other.left+"px",r.otherCursor.style.top=n.other.top+"px",r.otherCursor.style.height=.85*(n.other.bottom-n.other.top)+"px"):r.otherCursor.style.display="none"):s.cursor.style.display=s.otherCursor.style.display="none",a?s.selectionDiv.style.display="none":function(i){var t=i.display,e=i.doc,r=i.doc.sel,o=document.createDocumentFragment(),p=t.lineSpace.offsetWidth,g=function(t){return Mn(t.measure,Sn("pre",null,null,"text-align: left")).appendChild(Sn("span","x")).offsetLeft}(i.display);function m(t,e,r,n){e<0&&(e=0),o.appendChild(Sn("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+e+"px; width: "+(null==r?p-t:r)+"px; height: "+(n-e)+"px"))}function n(r,a,u){var c,h,n=Mr(e,r),f=n.text.length;function d(t,e){return ot(i,oe(r,t),"div",n,e)}return function(t,e,r,n){if(!t)return n(e,r,"ltr");for(var i=!1,o=0;o<t.length;++o){var l=t[o];(l.from<r&&l.to>e||e==r&&l.to==e)&&(n(Math.max(l.from,e),Math.min(l.to,r),1==l.level?"rtl":"ltr"),i=!0)}i||n(e,r,"ltr")}(Or(n),a||0,null==u?f:u,function(t,e,r){var n,i,o,l,s=d(t,"left");t==e?n=i=(l=s).left:(l=d(e-1,"right"),"rtl"==r&&(o=s,s=l,l=o),n=s.left,i=l.right),null==a&&0==t&&(n=g),3<l.top-s.top&&(m(n,s.top,null,s.bottom),n=g,s.bottom<l.top&&m(n,s.bottom,null,l.top)),null==u&&e==f&&(i=p),(!c||s.top<c.top||s.top==c.top&&s.left<c.left)&&(c=s),(!h||l.bottom>h.bottom||l.bottom==h.bottom&&l.right>h.right)&&(h=l),n<g+1&&(n=g),m(n,l.top,i-n,l.bottom)}),{start:c,end:h}}{var l,s,a,u,c;r.from.line==r.to.line?n(r.from.line,r.from.ch,r.to.ch):(l=Mr(e,r.from.line),s=Mr(e,r.to.line),a=Je(e,l)==Je(e,s),u=n(r.from.line,r.from.ch,a?l.text.length:null).end,c=n(r.to.line,a?0:null,r.to.ch).start,a&&(u.top<c.top-2?(m(u.right,u.top,null,u.bottom),m(g,c.top,c.left,c.bottom)):m(u.right,u.top,c.left-u.right,u.bottom)),u.bottom<c.top&&m(g,u.bottom,null,c.top))}Mn(t.selectionDiv,o),t.selectionDiv.style.display=""}(t),t.options.moveInputWithCursor&&(i=lt(t,t.doc.sel.head,"div"),o=An(s.wrapper),l=An(s.lineDiv),s.inputDiv.style.top=Math.max(0,Math.min(s.wrapper.clientHeight-10,i.top+l.top-o.top))+"px",s.inputDiv.style.left=Math.max(0,Math.min(s.wrapper.clientWidth-10,i.left+l.left-o.left))+"px")}function U(t){var e,r;t.state.focused&&(e=t.display,clearInterval(e.blinker),r=!0,e.cursor.style.visibility=e.otherCursor.style.visibility="",0<t.options.cursorBlinkRate&&(e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(r=!r)?"":"hidden"},t.options.cursorBlinkRate)))}function X(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,bn(_,t))}function _(i){var o,l,s,a,u=i.doc;u.frontier<u.first&&(u.frontier=u.first),u.frontier>=i.display.showingTo||(o=+new Date+i.options.workTime,l=ze(u.mode,Y(i,u.frontier)),s=[],u.iter(u.frontier,Math.min(u.first+u.size,i.display.showingTo+500),function(t){if(u.frontier>=i.display.showingFrom){var e=t.styles;t.styles=ar(i,t,l,!0);for(var r=!e||e.length!=t.styles.length,n=0;!r&&n<e.length;++n)r=e[n]!=t.styles[n];r&&(a&&a.end==u.frontier?a.end++:s.push(a={start:u.frontier,end:u.frontier+1})),t.stateAfter=ze(u.mode,l)}else cr(i,t.text,l),t.stateAfter=u.frontier%5==0?ze(u.mode,l):null;if(++u.frontier,+new Date>o)return X(i,i.options.workDelay),!0}),s.length&&mt(i,function(){for(var t=0;t<s.length;++t)bt(this,s[t].start,s[t].end)})())}function Y(r,n,t){var i=r.doc,o=r.display;if(!i.mode.startState)return!0;var l=function(t,e,r){for(var n,i,o=t.doc,l=r?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;l<s;--s){if(s<=o.first)return o.first;var a=Mr(o,s-1);if(a.stateAfter&&(!r||s<=o.frontier))return s;var u=cn(a.text,null,t.options.tabSize);(null==i||u<n)&&(i=s-1,n=u)}return i}(r,n,t),s=(s=l>i.first&&Mr(i,l-1).stateAfter)?ze(i.mode,s):Ie(i.mode);return i.iter(l,n,function(t){cr(r,t.text,s);var e=l==n-1||l%5==0||l>=o.showingFrom&&l<o.showingTo;t.stateAfter=e?ze(i.mode,s):null,++l}),t&&(i.frontier=l),s}function j(t){return t.lineSpace.offsetTop}function $(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Z(t,e,r,n,i){var o=-1;if((n=n||Q(t,e)).crude){var l=n.left+r*n.width;return{left:l,right:l+n.width,top:n.top,bottom:n.bottom}}for(var s=r;;s+=o){var a=n[s];if(a)break;o<0&&0==s&&(o=1)}return"left"==(i=r<s?"left":s<r?"right":i)&&a.leftSide?a=a.leftSide:"right"==i&&a.rightSide&&(a=a.rightSide),{left:s<r?a.right:a.left,right:r<s?a.left:a.right,top:a.top,bottom:a.bottom}}function q(t,e){for(var r=t.display.measureLineCache,n=0;n<r.length;++n){var i=r[n];if(i.text==e.text&&i.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==i.width&&i.classes==e.textClass+"|"+e.wrapClass)return i}}function Q(t,e){var r=q(t,e);if(r)return r.measure;var n=J(t,e),i=t.display.measureLineCache,o={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:n,classes:e.textClass+"|"+e.wrapClass};return 16==i.length?i[++t.display.measureLineCachePos%16]=o:i.push(o),n}function J(t,e){if(!t.options.lineWrapping&&e.text.length>=t.options.crudeMeasuringFrom)return function(t,e){var r=new lr(e.text.slice(0,100),null);e.textClass&&(r.textClass=e.textClass);var n=J(t,r),i=Z(t,r,0,n,"left"),o=Z(t,r,99,n,"right");return{crude:!0,top:i.top,left:i.left,bottom:i.bottom,width:(o.right-i.left)/100}}(t,e);var r=t.display,n=yn(e.text.length),i=dr(t,e,n,!0).pre;if(w&&!S&&!t.options.lineWrapping&&100<i.childNodes.length){for(var o=document.createDocumentFragment(),l=i.childNodes.length,s=0,a=Math.ceil(l/10);s<a;++s){for(var u=Sn("div",null,null,"display: inline-block"),c=0;c<10&&l;++c)u.appendChild(i.firstChild),--l;o.appendChild(u)}i.appendChild(o)}Mn(r.measure,i);var h=An(r.lineDiv),f=[],d=yn(e.text.length),p=i.offsetHeight;function g(t){var e=t.top-h.top,r=t.bottom-h.top;p<r&&(r=p),e<0&&(e=0);for(var n=f.length-2;0<=n;n-=2){var i=f[n],o=f[n+1];if(!(r<i||o<e)&&(i<=e&&r<=o||e<=i&&o<=r||Math.min(r,o)-Math.max(e,i)>=r-e>>1)){f[n]=Math.min(e,i),f[n+1]=Math.max(r,o);break}}return n<0&&(n=f.length,f.push(e,r)),{left:t.left-h.left,right:t.right-h.left,top:n,bottom:null}}function m(t){t.bottom=f[t.top+1],t.top=f[t.top]}C&&r.measure.first!=i&&Mn(r.measure,i);for(var v,y,b,s=0;s<n.length;++s){(x=n[s])&&(y=null,/\bCodeMirror-widget\b/.test((v=x).className)&&x.getClientRects&&(1==x.firstChild.nodeType&&(v=x.firstChild),1<(b=v.getClientRects()).length&&((y=d[s]=g(b[0])).rightSide=g(b[b.length-1]))),y=y||(d[s]=g(An(v))),x.measureRight&&(y.right=An(x.measureRight).left),x.leftSide&&(y.leftSide=g(An(x.leftSide))))}kn(t.display.measure);for(var x,s=0;s<d.length;++s)(x=d[s])&&(m(x),x.leftSide&&m(x.leftSide),x.rightSide&&m(x.rightSide));return d}function tt(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function et(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function rt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function nt(t,e,r,n){if(e.widgets)for(var i=0;i<e.widgets.length;++i){var o;e.widgets[i].above&&(o=or(e.widgets[i]),r.top+=o,r.bottom+=o)}if("line"==n)return r;n=n||"local";var l,s,a=Wr(t,e);return"local"==n?a+=j(t.display):a-=t.display.viewOffset,"page"!=n&&"window"!=n||(a+=(l=An(t.display.lineSpace)).top+("window"==n?0:rt()),s=l.left+("window"==n?0:et()),r.left+=s,r.right+=s),r.top+=a,r.bottom+=a,r}function it(t,e,r){if("div"==r)return e;var n,i=e.left,o=e.top;"page"==r?(i-=et(),o-=rt()):"local"!=r&&r||(i+=(n=An(t.display.sizer)).left,o+=n.top);var l=An(t.display.lineSpace);return{left:i-l.left,top:o-l.top}}function ot(t,e,r,n,i){return nt(t,n=n||Mr(t.doc,e.line),Z(t,n,e.ch,null,i),r)}function lt(n,t,i,o,l){function s(t,e){var r=Z(n,o,t,l,e?"right":"left");return e?r.left=r.right:r.right=r.left,nt(n,o,r,i)}function e(t,e){var r=a[e],n=r.level%2;return t==Gn(r)&&e&&r.level<a[e-1].level?(t=Vn(r=a[--e])-(r.level%2?0:1),n=!0):t==Vn(r)&&e<a.length-1&&r.level<a[e+1].level&&(t=Gn(r=a[++e])-r.level%2,n=!1),n&&t==r.to&&t>r.from?s(t-1):s(t,n)}o=o||Mr(n.doc,t.line),l=l||Q(n,o);var a=Or(o),r=t.ch;if(!a)return s(r);var u=e(r,_n(a,r));return null!=Fn&&(u.other=e(r,Fn)),u}function st(t,e,r,n){var i=new oe(t,e);return i.xRel=n,r&&(i.outside=!0),i}function at(t,e,r){var n=t.doc;if((r+=t.display.viewOffset)<0)return st(n.first,0,!0,-1);var i=Dr(n,r),o=n.first+n.size-1;if(o<i)return st(n.first+n.size-1,Mr(n,o).text.length,!0,1);for(e<0&&(e=0);;){var l=Mr(n,i),s=function(r,n,i,t,e){var o=e-Wr(r,n),l=!1,s=2*r.display.wrapper.clientWidth,a=Q(r,n);function u(t){var e=lt(r,oe(i,t),"line",n,a);return l=!0,o>e.bottom?e.left-s:o<e.top?e.left+s:(l=!1,e.left)}var c=Or(n),h=n.text.length,f=Kn(n),d=Un(n),p=u(f),g=l,m=u(d),v=l;if(m<t)return st(i,d,v,1);for(;;){if(c?d==f||d==jn(n,f,1):d-f<=1){for(var y=t<p||t-p<=m-t?f:d,b=t-(y==f?p:m);Ln.test(n.text.charAt(y));)++y;return st(i,y,y==f?g:v,b<0?-1:b?1:0)}var x=Math.ceil(h/2),C=f+x;if(c){C=f;for(var w=0;w<x;++w)C=jn(n,C,1)}var L=u(C);t<L?(d=C,m=L,(v=l)&&(m+=1e3),h=x):(f=C,p=L,g=l,h-=x)}}(t,l,i,e,r),a=Qe(l),u=a&&a.find();if(!a||!(s.ch>u.from.ch||s.ch==u.from.ch&&0<s.xRel))return s;i=u.to.line}}function ut(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==i){i=Sn("pre");for(var e=0;e<49;++e)i.appendChild(document.createTextNode("x")),i.appendChild(Sn("br"));i.appendChild(document.createTextNode("x"))}Mn(t.measure,i);var r=i.offsetHeight/50;return 3<r&&(t.cachedTextHeight=r),kn(t.measure),r||1}function ct(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=Sn("span","x"),r=Sn("pre",[e]);Mn(t.measure,r);var n=e.offsetWidth;return 2<n&&(t.cachedCharWidth=n),n||10}var ht,ft,dt=0;function pt(t){t.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++dt},tn++||(Jr=[])}function gt(t){var e,r,n,i,o,l,s,a=t.curOp,u=t.doc,c=t.display;t.curOp=null,a.updateMaxLine&&O(t),c.maxLineChanged&&!t.options.lineWrapping&&c.maxLine&&(e=function(t,e){var r=!1;if(e.markedSpans)for(var n=0;n<e.markedSpans;++n){var i=e.markedSpans[n];!i.collapsed||null!=i.to&&i.to!=e.text.length||(r=!0)}var o=!r&&q(t,e);if(o||e.text.length>=t.options.crudeMeasuringFrom)return Z(t,e,e.text.length,o&&o.measure,"right").right;var l=dr(t,e,null,!0).pre,s=l.appendChild(En(t.display.measure));return Mn(t.display.measure,l),An(s).right-An(t.display.lineDiv).left}(t,c.maxLine),c.sizer.style.minWidth=Math.max(0,e+3+sn)+"px",c.maxLineChanged=!1,(r=Math.max(0,c.sizer.offsetLeft+c.sizer.offsetWidth-c.scroller.clientWidth))<u.scrollLeft&&!a.updateScrollPos&&Et(t,Math.min(c.scroller.scrollLeft,r),!0)),a.updateScrollPos?o=a.updateScrollPos:a.selectionChanged&&c.scroller.clientHeight&&(o=ye(t,(i=lt(t,u.sel.head)).left,i.top,i.left,i.bottom)),(a.changes.length||a.forceUpdate||o&&null!=o.scrollTop)&&(n=B(t,a.changes,o&&o.scrollTop,a.forceUpdate),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!n&&a.selectionChanged&&K(t),a.updateScrollPos?(l=Math.max(0,Math.min(c.scroller.scrollHeight-c.scroller.clientHeight,o.scrollTop)),s=Math.max(0,Math.min(c.scroller.scrollWidth-c.scroller.clientWidth,o.scrollLeft)),c.scroller.scrollTop=c.scrollbarV.scrollTop=u.scrollTop=l,c.scroller.scrollLeft=c.scrollbarH.scrollLeft=u.scrollLeft=s,F(t),a.scrollToPos&&ve(t,ce(t.doc,a.scrollToPos.from),ce(t.doc,a.scrollToPos.to),a.scrollToPos.margin)):o&&function(t){var e=ve(t,t.doc.sel.head,null,t.options.cursorScrollMargin);if(!t.state.focused)return;var r=t.display,n=An(r.sizer),i=null;e.top+n.top<0?i=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);{var o;null==i||m||((o="none"==r.cursor.style.display)&&(r.cursor.style.display="",r.cursor.style.left=e.left+"px",r.cursor.style.top=e.top-r.viewOffset+"px"),r.cursor.scrollIntoView(i),o&&(r.cursor.style.display="none"))}}(t),a.selectionChanged&&U(t),t.state.focused&&a.updateInput&&Lt(t,a.userSelChange);var h,f=a.maybeHiddenMarkers,d=a.maybeUnhiddenMarkers;if(f)for(var p=0;p<f.length;++p)f[p].lines.length||Qr(f[p],"hide");if(d)for(p=0;p<d.length;++p)d[p].lines.length&&Qr(d[p],"unhide");if(--tn||(h=Jr,Jr=null),a.textChanged&&Qr(t,"change",t,a.textChanged),a.cursorActivity&&Qr(t,"cursorActivity",t),h)for(p=0;p<h.length;++p)h[p]()}function mt(n,i){return function(){var t=n||this,e=!t.curOp;e&&pt(t);try{var r=i.apply(t,arguments)}finally{e&&gt(t)}return r}}function vt(r){return function(){var t,e=this.cm&&!this.cm.curOp;e&&pt(this.cm);try{t=r.apply(this,arguments)}finally{e&&gt(this.cm)}return t}}function yt(t,e){var r,n=!t.curOp;n&&pt(t);try{r=e()}finally{n&&gt(t)}return r}function bt(t,e,r,n){null==e&&(e=t.doc.first),null==r&&(r=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:r,diff:n})}function xt(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){wt(t),t.state.focused&&xt(t)})}function Ct(e){var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,function t(){wt(e)||r?(e.display.pollingFast=!1,xt(e)):(r=!0,e.display.poll.set(60,t))})}function wt(t){var e=t.display.input,r=t.display.prevInput,n=t.doc,i=n.sel;if(!t.state.focused||Pn(e)||kt(t)||t.state.disableInput)return!1;t.state.pasteIncoming&&t.state.fakedLastChar&&(e.value=e.value.substring(0,e.value.length-1),t.state.fakedLastChar=!1);var o=e.value;if(o==r&&le(i.from,i.to))return!1;if(w&&!C&&t.display.inputHasSelection===o)return Lt(t,!0),!1;var l=!t.curOp;l&&pt(t),i.shift=!1;for(var s=0,a=Math.min(r.length,o.length);s<a&&r.charCodeAt(s)==o.charCodeAt(s);)++s;var u=i.from,c=i.to;s<r.length?u=oe(u.line,u.ch-(r.length-s)):t.state.overwrite&&le(u,c)&&!t.state.pasteIncoming&&(c=oe(c.line,Math.min(Mr(n,c.line).text.length,c.ch+(o.length-s))));var h=t.curOp.updateInput,f={from:u,to:c,text:zn(o.slice(s)),origin:t.state.pasteIncoming?"paste":"+input"};return Jt(t.doc,f,"end"),t.curOp.updateInput=h,en(t,"inputRead",t,f),1e3<o.length||-1<o.indexOf("\n")?e.value=t.display.prevInput="":t.display.prevInput=o,l&&gt(t),!(t.state.pasteIncoming=!1)}function Lt(t,e){var r,n,i,o=t.doc;le(o.sel.from,o.sel.to)?e&&(t.display.prevInput=t.display.input.value="",w&&!C&&(t.display.inputHasSelection=null)):(t.display.prevInput="",i=(r=Rn&&(100<o.sel.to.line-o.sel.from.line||1e3<(n=t.getSelection()).length))?"-":n||t.getSelection(),t.display.input.value=i,t.state.focused&&pn(t.display.input),w&&!C&&(t.display.inputHasSelection=i)),t.display.inaccurateSelection=r}function St(t){"nocursor"==t.options.readOnly||d&&document.activeElement==t.display.input||t.display.input.focus()}function kt(t){return t.options.readOnly||t.doc.cantEdit}function Mt(t,e){for(var r=jr(e);r!=t.wrapper;r=r.parentNode)if(!r||r.ignoreEvents||r.parentNode==t.sizer&&r!=t.mover)return 1}function Tt(t,e,r){var n=t.display;if(!r){var i=jr(e);if(i==n.scrollbarH||i==n.scrollbarH.firstChild||i==n.scrollbarV||i==n.scrollbarV.firstChild||i==n.scrollbarFiller||i==n.gutterFiller)return null}var o,l,s=An(n.lineSpace);try{o=e.clientX,l=e.clientY}catch(e){return null}return at(t,o-s.left,l-s.top)}function At(e){if(!rn(this,e)){var s=this,a=s.display,u=s.doc,t=u.sel;if(t.shift=e.shiftKey,Mt(a,e))L||(a.scroller.draggable=!1,setTimeout(function(){a.scroller.draggable=!0},100));else if(!Ht(s,e)){var c=Tt(s,e);switch($r(e)){case 3:return void(k&&jt.call(s,s,e));case 2:return L&&(s.state.lastMiddleDown=+new Date),c&&de(s.doc,c),setTimeout(bn(St,s),20),void Ur(e)}if(c){s.state.focused||_t(s);var r,n,i,o=+new Date,h="single";ft&&ft.time>o-400&&le(ft.pos,c)?(h="triple",Ur(e),setTimeout(bn(St,s),20),n=s,i=c.line,de(n.doc,oe(i,0),ce(n.doc,oe(i+1,0)))):ht&&ht.time>o-400&&le(ht.pos,c)?(h="double",ft={time:o,pos:c},Ur(e),r=ke(Mr(u,c.line).text,c),de(s.doc,r.from,r.to)):ht={time:o,pos:c};var f=c;if(s.options.dragDrop&&Dn&&!kt(s)&&!le(t.from,t.to)&&!se(c,t.from)&&!se(t.to,c)&&"single"==h){var l=mt(s,function(t){L&&(a.scroller.draggable=!1),s.state.draggingText=!1,qr(document,"mouseup",l),qr(a.scroller,"drop",l),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(Ur(t),de(s.doc,c),St(s))});return L&&(a.scroller.draggable=!0),s.state.draggingText=l,a.scroller.dragDrop&&a.scroller.dragDrop(),Zr(document,"mouseup",l),void Zr(a.scroller,"drop",l)}Ur(e),"single"==h&&de(s.doc,ce(u,c));var d=t.from,p=t.to,g=c,m=An(a.wrapper),v=0,y=mt(s,function(t){(w||$r(t)?x:C)(t)}),b=mt(s,C);Zr(document,"mousemove",y),Zr(document,"mouseup",b)}else jr(e)==a.scroller&&Ur(e)}}function x(t){var e,r,n,i,o=++v,l=Tt(s,t,!0);l&&(le(l,f)?(e=t.clientY<m.top?-20:t.clientY>m.bottom?20:0)&&setTimeout(mt(s,function(){v==o&&(a.scroller.scrollTop+=e,x(t))}),50):(s.state.focused||_t(s),le(g,n=f=l)||(g=n,"single"!=h?(d=ce(u,d),p=ce(u,p),"double"==h?(i=ke(Mr(u,n.line).text,n),se(n,d)?de(s.doc,i.from,p):de(s.doc,d,i.to)):"triple"==h&&(se(n,d)?de(s.doc,p,ce(u,oe(n.line,0))):de(s.doc,d,ce(u,oe(n.line+1,0))))):de(s.doc,ce(u,c),n)),r=I(a,u),(l.line>=r.to||l.line<r.from)&&setTimeout(mt(s,function(){v==o&&x(t)}),150)))}function C(t){v=1/0,Ur(t),St(s),qr(document,"mousemove",y),qr(document,"mouseup",b)}}function Nt(t,e,r,n,i){try{var o=e.clientX,l=e.clientY}catch(e){return!1}if(o>=Math.floor(An(t.display.gutters).right))return!1;n&&Ur(e);var s=t.display,a=An(s.lineDiv);if(l>a.bottom||!on(t,r))return _r(e);l-=a.top-s.viewOffset;for(var u=0;u<t.options.gutters.length;++u){var c=s.gutters.childNodes[u];if(c&&An(c).right>=o)return i(t,r,t,Dr(t.doc,l),t.options.gutters[u],e),_r(e)}}function Ht(t,e){return Nt(t,e,"gutterClick",!0,en)}var Dt=0;function Wt(t){var n=this;if(!(rn(n,t)||Mt(n.display,t)||n.options.onDragEvent&&n.options.onDragEvent(n,Kr(t)))){Ur(t),w&&(Dt=+new Date);var e,r,i=Tt(n,t,!0),o=t.dataTransfer.files;if(i&&!kt(n))if(o&&o.length&&window.FileReader&&window.File)for(var l=o.length,s=Array(l),a=0,u=0;u<l;++u)!function(t,e){var r=new FileReader;r.onload=function(){s[e]=r.result,++a==l&&(i=ce(n.doc,i),Jt(n.doc,{from:i,to:i,text:zn(s.join("\n")),origin:"paste"},"around"))},r.readAsText(t)}(o[u],u);else{if(n.state.draggingText&&!se(i,n.doc.sel.from)&&!se(n.doc.sel.to,i))return n.state.draggingText(t),void setTimeout(bn(St,n),20);try{(s=t.dataTransfer.getData("Text"))&&(e=n.doc.sel.from,r=n.doc.sel.to,pe(n.doc,i,i),n.state.draggingText&&ie(n.doc,"",e,r,"paste"),n.replaceSelection(s,null,"paste"),St(n))}catch(t){}}}}function Ot(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,c||B(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),c&&B(t,[]),X(t,100))}function Et(t,e,r){(r?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,F(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}var zt,It=0,Ft=null;function Pt(t,e){var r=e.wheelDeltaX,n=e.wheelDeltaY;null==r&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(r=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta);var i,o,l,s=t.display,a=s.scroller;if(r&&a.scrollWidth>a.clientWidth||n&&a.scrollHeight>a.clientHeight){if(n&&x&&L)for(var u=e.target;u!=a;u=u.parentNode)if(u.lineObj){t.display.currentWheelTarget=u;break}if(r&&!c&&!f&&null!=Ft)return n&&Ot(t,Math.max(0,Math.min(a.scrollTop+n*Ft,a.scrollHeight-a.clientHeight))),Et(t,Math.max(0,Math.min(a.scrollLeft+r*Ft,a.scrollWidth-a.clientWidth))),Ur(e),void(s.wheelStartX=null);n&&null!=Ft&&(i=n*Ft,l=(o=t.doc.scrollTop)+s.wrapper.clientHeight,i<0?o=Math.max(0,o+i-50):l=Math.min(t.doc.height,l+i+50),B(t,[],{top:o,bottom:l})),It<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=r,s.wheelDY=n,setTimeout(function(){var t,e,r;null!=s.wheelStartX&&(t=a.scrollLeft-s.wheelStartX,r=(e=a.scrollTop-s.wheelStartY)&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX,s.wheelStartX=s.wheelStartY=null,r&&(Ft=(Ft*It+r)/(It+1),++It))},200)):(s.wheelDX+=r,s.wheelDY+=n))}}function Rt(t,e,r){if("string"==typeof e&&!(e=Fe[e]))return!1;t.display.pollingFast&&wt(t)&&(t.display.pollingFast=!1);var n=t.doc,i=n.sel.shift,o=!1;try{kt(t)&&(t.state.suppressEdits=!0),r&&(n.sel.shift=!1),o=e(t)!=an}finally{n.sel.shift=i,t.state.suppressEdits=!1}return o}function Bt(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function Gt(e,t){var r=Re(e.options.keyMap),n=r.auto;clearTimeout(zt),n&&!Ge(t)&&(zt=setTimeout(function(){Re(e.options.keyMap)==r&&(e.options.keyMap=n.call?n.call(null,e):n,A(e))},50));var i=Ve(t,!0),o=!1;if(!i)return!1;var l=Bt(e);return(o=t.shiftKey?Be("Shift-"+i,l,function(t){return Rt(e,t,!0)})||Be(i,l,function(t){return!("string"==typeof t?!/^go[A-Z]/.test(t):!t.motion)&&Rt(e,t)}):Be(i,l,function(t){return Rt(e,t)}))&&(Ur(t),U(e),C&&(t.oldKeyCode=t.keyCode,t.keyCode=0),en(e,"keyHandled",e,i,t)),o}w?Ft=-.53:c?Ft=15:e?Ft=-.7:s&&(Ft=-1/3);var Vt,Kt=null;function Ut(t){var e,r,n=this;n.state.focused||_t(n),rn(n,t)||n.options.onKeyEvent&&n.options.onKeyEvent(n,Kr(t))||(w&&27==t.keyCode&&(t.returnValue=!1),e=t.keyCode,n.doc.sel.shift=16==e||t.shiftKey,r=Gt(n,t),f&&(Kt=r?e:null,!r&&88==e&&!Rn&&(x?t.metaKey:t.ctrlKey)&&n.replaceSelection("")))}function Xt(t){var e=this;if(!(rn(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Kr(t)))){var r,n,i,o,l,s=t.keyCode,a=t.charCode;if(f&&s==Kt)return Kt=null,void Ur(t);(f&&(!t.which||t.which<10)||u)&&Gt(e,t)||(r=String.fromCharCode(null==a?s:a),this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!kt(this)&&-1<this.doc.mode.electricChars.indexOf(r)&&setTimeout(mt(e,function(){Ce(e,e.doc.sel.to.line,"smart")}),75),i=t,(l=Be("'"+(o=r)+"'",Bt(n=e),function(t){return Rt(n,t,!0)}))&&(Ur(i),U(n),en(n,"keyHandled",n,"'"+o+"'",i)),l||(w&&!C&&(e.display.inputHasSelection=null),Ct(e)))}}function _t(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(Qr(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),t.curOp||(Lt(t,!0),L&&setTimeout(bn(Lt,t,!0),0))),xt(t),U(t))}function Yt(t){t.state.focused&&(Qr(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function jt(r,t){var n,e,i,o,l,s,a,u;function c(){var t;null!=n.input.selectionStart&&(t=n.input.value="​"+(le(e.from,e.to)?"":n.input.value),n.prevInput="​",n.input.selectionStart=1,n.input.selectionEnd=t.length)}function h(){var t,e;n.inputDiv.style.position="relative",n.input.style.cssText=a,C&&(n.scrollbarV.scrollTop=n.scroller.scrollTop=s),xt(r),null!=n.input.selectionStart&&(w&&!C||c(),clearTimeout(Vt),t=0,e=function(){" "==n.prevInput&&0==n.input.selectionStart?mt(r,Fe.selectAll)(r):t++<10?Vt=setTimeout(e,500):Lt(r)},Vt=setTimeout(e,200))}rn(r,t,"contextmenu")||(n=r.display,e=r.doc.sel,Mt(n,t)||(o=t,on(i=r,"gutterContextMenu")&&Nt(i,o,"gutterContextMenu",!1,Qr))||(l=Tt(r,t),s=n.scroller.scrollTop,l&&!f&&(r.options.resetSelectionOnContextMenu&&(le(e.from,e.to)||se(l,e.from)||!se(l,e.to))&&mt(r,pe)(r.doc,l,l),a=n.input.style.cssText,n.inputDiv.style.position="absolute",n.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",St(r),Lt(r,!0),le(e.from,e.to)&&(n.input.value=n.prevInput=" "),w&&!C&&c(),k?(Yr(t),u=function(){qr(window,"mouseup",u),setTimeout(h,20)},Zr(window,"mouseup",u)):setTimeout(h,50))))}var $t=v.changeEnd=function(t){return t.text?oe(t.from.line+t.text.length-1,dn(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};function Zt(t,e,r){if(!se(e.from,r))return ce(t,r);var n=e.text.length-1-(e.to.line-e.from.line);if(r.line>e.to.line+n){var i=r.line-n,o=t.first+t.size-1;return o<i?oe(o,Mr(t,o).text.length):he(r,Mr(t,i).text.length)}if(r.line==e.to.line+n)return he(r,dn(e.text).length+(1==e.text.length?e.from.ch:0)+Mr(t,e.to.line).text.length-e.to.ch);var l=r.line-e.from.line;return he(r,e.text[l].length+(l?0:e.from.ch))}function qt(t,n,e){if(e&&"object"==typeof e)return{anchor:Zt(t,n,e.anchor),head:Zt(t,n,e.head)};if("start"==e)return{anchor:n.from,head:n.from};var i=$t(n);if("around"==e)return{anchor:n.from,head:i};if("end"==e)return{anchor:i,head:i};function r(t){if(se(t,n.from))return t;if(!se(n.to,t))return i;var e=t.line+n.text.length-(n.to.line-n.from.line)-1,r=t.ch;return t.line==n.to.line&&(r+=i.ch-n.to.ch),oe(e,r)}return{anchor:r(t.sel.anchor),head:r(t.sel.head)}}function Qt(i,t,e){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return e&&(r.update=function(t,e,r,n){t&&(this.from=ce(i,t)),e&&(this.to=ce(i,e)),r&&(this.text=r),void 0!==n&&(this.origin=n)}),Qr(i,"beforeChange",i,r),i.cm&&Qr(i.cm,"beforeChange",i.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Jt(t,e,r,n){if(t.cm){if(!t.cm.curOp)return mt(t.cm,Jt)(t,e,r,n);if(t.cm.state.suppressEdits)return}if(!(on(t,"beforeChange")||t.cm&&on(t.cm,"beforeChange"))||(e=Qt(t,e,!0))){var i=p&&!n&&function(t,e,r){var n=null;if(t.iter(e.line,r.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var r=t.markedSpans[e].marker;!r.readOnly||n&&-1!=gn(n,r)||(n=n||[]).push(r)}}),!n)return null;for(var i=[{from:e,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(),a=0;a<i.length;++a){var u,c=i[a];se(c.to,s.from)||se(s.to,c.from)||(u=[a,1],(se(c.from,s.from)||!l.inclusiveLeft&&le(c.from,s.from))&&u.push({from:c.from,to:s.from}),(se(s.to,c.to)||!l.inclusiveRight&&le(c.to,s.to))&&u.push({from:s.to,to:c.to}),i.splice.apply(i,u),a+=u.length-1)}return i}(t,e.from,e.to);if(i){for(var o=i.length-1;1<=o;--o)te(t,{from:i[o].from,to:i[o].to,text:[""]});i.length&&te(t,{from:i[0].from,to:i[0].to,text:e.text},r)}else te(t,e,r)}}function te(t,r,e){var n,i;1==r.text.length&&""==r.text[0]&&le(r.from,r.to)||(n=qt(t,r,e),Fr(t,r,n,t.cm?t.cm.curOp.id:NaN),ne(t,r,n,je(t,r)),i=[],Sr(t,function(t,e){e||-1!=gn(i,t.history)||(Gr(t.history,r),i.push(t.history)),ne(t,r,null,je(t,r))}))}function ee(t,e){if(!t.cm||!t.cm.state.suppressEdits){var r=t.history,n=("undo"==e?r.done:r.undone).pop();if(n){var i={changes:[],anchorBefore:n.anchorAfter,headBefore:n.headAfter,anchorAfter:n.anchorBefore,headAfter:n.headBefore,generation:r.generation};("undo"==e?r.undone:r.done).push(i),r.generation=n.generation||++r.maxGeneration;for(var o=on(t,"beforeChange")||t.cm&&on(t.cm,"beforeChange"),l=n.changes.length-1;0<=l;--l){var s=n.changes[l];if(s.origin=e,o&&!Qt(t,s,!1))return void(("undo"==e?r.done:r.undone).length=0);i.changes.push(Ir(t,s));var a=l?qt(t,s,null):{anchor:n.anchorBefore,head:n.headBefore};ne(t,s,a,$e(t,s));var u=[];Sr(t,function(t,e){e||-1!=gn(u,t.history)||(Gr(t.history,s),u.push(t.history)),ne(t,s,null,$e(t,s))})}}}}function re(t,e){function r(t){return oe(t.line+e,t.ch)}t.first+=e,t.cm&&bt(t.cm,t.first,t.first,e),t.sel.head=r(t.sel.head),t.sel.anchor=r(t.sel.anchor),t.sel.from=r(t.sel.from),t.sel.to=r(t.sel.to)}function ne(t,e,r,n){if(t.cm&&!t.cm.curOp)return mt(t.cm,ne)(t,e,r,n);var i,o;e.to.line<t.first?re(t,e.text.length-1-(e.to.line-e.from.line)):e.from.line>t.lastLine()||(e.from.line<t.first&&(re(t,i=e.text.length-1-(t.first-e.from.line)),e={from:oe(t.first,0),to:oe(e.to.line+i,e.to.ch),text:[dn(e.text)],origin:e.origin}),o=t.lastLine(),e.to.line>o&&(e={from:e.from,to:oe(o,Mr(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=Tr(t,e.from,e.to),r=r||qt(t,e,null),t.cm?function(t,e,r,n){var i=t.doc,o=t.display,l=e.from,s=e.to,a=!1,u=l.line;t.options.lineWrapping||(u=Hr(Je(i,Mr(i,l.line))),i.iter(u,s.line+1,function(t){if(t==o.maxLine)return a=!0}));se(i.sel.head,e.from)||se(e.to,i.sel.head)||(t.curOp.cursorActivity=!0);vr(i,e,r,n,M(t)),t.options.lineWrapping||(i.iter(u,l.line+e.text.length,function(t){var e=W(i,t);e>o.maxLineLength&&(o.maxLine=t,o.maxLineLength=e,o.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0));i.frontier=Math.min(i.frontier,l.line),X(t,400);var c=e.text.length-(s.line-l.line)-1;if(bt(t,l.line,s.line+1,c),on(t,"change")){var h={from:l,to:s,text:e.text,removed:e.removed,origin:e.origin};if(t.curOp.textChanged){for(var f=t.curOp.textChanged;f.next;f=f.next);f.next=h}else t.curOp.textChanged=h}}(t.cm,e,n,r):vr(t,e,n,r))}function ie(t,e,r,n,i){var o;se(n=n||r,r)&&(o=n,n=r,r=o),"string"==typeof e&&(e=zn(e)),Jt(t,{from:r,to:n,text:e,origin:i},null)}function oe(t,e){if(!(this instanceof oe))return new oe(t,e);this.line=t,this.ch=e}function le(t,e){return t.line==e.line&&t.ch==e.ch}function se(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function ae(t){return oe(t.line,t.ch)}function ue(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function ce(t,e){if(e.line<t.first)return oe(t.first,0);var r=t.first+t.size-1;return e.line>r?oe(r,Mr(t,r).text.length):he(e,Mr(t,e.line).text.length)}function he(t,e){var r=t.ch;return null==r||e<r?oe(t.line,e):r<0?oe(t.line,0):t}function fe(t,e){return e>=t.first&&e<t.first+t.size}function de(t,e,r,n){var i,o;t.sel.shift||t.sel.extend?(i=t.sel.anchor,r&&((o=se(e,i))!=se(r,i)?(i=e,e=r):o!=se(e,r)&&(e=r)),pe(t,i,e,n)):pe(t,e,r||e,n),t.cm&&(t.cm.curOp.userSelChange=!0)}function pe(t,e,r,n,i){var o,l,s;(!i&&on(t,"beforeSelectionChange")||t.cm&&on(t.cm,"beforeSelectionChange"))&&(Qr(l=t,"beforeSelectionChange",l,s={anchor:e,head:r}),l.cm&&Qr(l.cm,"beforeSelectionChange",l.cm,s),s.anchor=ce(l,s.anchor),s.head=ce(l,s.head),r=(o=s).head,e=o.anchor);var a,u=t.sel;(u.goalColumn=null)==n&&(n=se(r,u.head)?-1:1),!i&&le(e,u.anchor)||(e=me(t,e,n,"push"!=i)),!i&&le(r,u.head)||(r=me(t,r,n,"push"!=i)),le(u.anchor,e)&&le(u.head,r)||(u.anchor=e,a=se(u.head=r,e),u.from=a?r:e,u.to=a?e:r,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),en(t,"cursorActivity",t))}function ge(t){pe(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function me(t,e,r,n){var i=!1,o=e,l=r||1;t.cantEdit=!1;t:for(;;){var s=Mr(t,o.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var u=s.markedSpans[a],c=u.marker;if((null==u.from||(c.inclusiveLeft?u.from<=o.ch:u.from<o.ch))&&(null==u.to||(c.inclusiveRight?u.to>=o.ch:u.to>o.ch))){if(n&&(Qr(c,"beforeCursorEnter"),c.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(!c.atomic)continue;var h=c.find()[l<0?"from":"to"];if(le(h,o)&&(h.ch+=l,h.ch<0?h=h.line>t.first?ce(t,oe(h.line-1)):null:h.ch>s.text.length&&(h=h.line<t.first+t.size-1?oe(h.line+1,0):null),!h)){if(i)return n?(t.cantEdit=!0,oe(t.first,0)):me(t,e,r,!0);i=!0,h=e,l=-l}o=h;continue t}}return o}}function ve(t,e,r,n){for(null==n&&(n=0);;){var i=!1,o=lt(t,e),l=r&&r!=e?lt(t,r):o,s=ye(t,Math.min(o.left,l.left),Math.min(o.top,l.top)-n,Math.max(o.left,l.left),Math.max(o.bottom,l.bottom)+n),a=t.doc.scrollTop,u=t.doc.scrollLeft;if(null!=s.scrollTop&&(Ot(t,s.scrollTop),1<Math.abs(t.doc.scrollTop-a)&&(i=!0)),null!=s.scrollLeft&&(Et(t,s.scrollLeft),1<Math.abs(t.doc.scrollLeft-u)&&(i=!0)),!i)return o}}function ye(t,e,r,n,i){var o=t.display,l=ut(t.display);r<0&&(r=0);var s,a=o.scroller.clientHeight-sn,u=o.scroller.scrollTop,c={},h=t.doc.height+$(o),f=r<l,d=h-l<i;r<u?c.scrollTop=f?0:r:u+a<i&&((s=Math.min(r,(d?h:i)-a))!=u&&(c.scrollTop=s));var p=o.scroller.clientWidth-sn,g=o.scroller.scrollLeft;e+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth;var m=o.gutters.offsetWidth,v=e<m+10;return e<g+m||v?(v&&(e=0),c.scrollLeft=Math.max(0,e-10-m)):p+g-3<n&&(c.scrollLeft=n+10-p),c}function be(t,e,r){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==r?t.doc.scrollTop:r}}function xe(t,e,r){var n=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),i=t.display.scroller;n.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,n.scrollTop+r)),n.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,n.scrollLeft+e))}function Ce(t,e,r,n){var i,o=t.doc;null==r&&(r="add"),"smart"==r&&(t.doc.mode.indent?i=Y(t,e):r="prev");var l,s=t.options.tabSize,a=Mr(o,e),u=cn(a.text,null,s),c=a.text.match(/^\s*/)[0];if("smart"==r&&(l=t.doc.mode.indent(i,a.text.slice(c.length),a.text))==an){if(!n)return;r="prev"}"prev"==r?l=e>o.first?cn(Mr(o,e-1).text,null,s):0:"add"==r?l=u+t.options.indentUnit:"subtract"==r?l=u-t.options.indentUnit:"number"==typeof r&&(l=u+r),l=Math.max(0,l);var h="",f=0;if(t.options.indentWithTabs)for(var d=Math.floor(l/s);d;--d)f+=s,h+="\t";f<l&&(h+=fn(l-f)),h!=c?ie(t.doc,h,oe(e,0),oe(e,c.length),"+input"):o.sel.head.line==e&&o.sel.head.ch<c.length&&pe(o,oe(e,c.length),oe(e,c.length),1),a.stateAfter=null}function we(t,e,r){var n=e,i=e,o=t.doc;return"number"==typeof e?i=Mr(o,ue(o,e)):n=Hr(e),null!=n&&r(i,n)?(bt(t,n,n+1),i):null}function Le(n,t,i,e,o){var l=t.line,s=t.ch,r=i,a=Mr(n,l),u=!0;function c(t){var e,r=(o?jn:$n)(a,s,i,!0);if(null==r){if(t||!((e=l+i)<n.first||e>=n.first+n.size?u=!1:a=Mr(n,l=e)))return u=!1;s=o?(i<0?Un:Kn)(a):i<0?a.text.length:0}else s=r;return 1}if("char"==e)c();else if("column"==e)c(!0);else if("word"==e||"group"==e)for(var h=null,f="group"==e,d=!0;!(i<0)||c(!d);d=!1){var p=a.text.charAt(s)||"\n",g=Cn(p)?"w":!f||/\s/.test(p)?null:"p";if(h&&h!=g){i<0&&(i=1,c());break}if(g&&(h=g),0<i&&!c(!d))break}var m=me(n,oe(l,s),r,!0);return u||(m.hitSide=!0),m}function Se(t,e,r,n){var i,o,l=t.doc,s=e.left;for("page"==n?(i=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),o=e.top+r*(i-(r<0?1.5:.5)*ut(t.display))):"line"==n&&(o=0<r?e.bottom+3:e.top-3);;){var a=at(t,s,o);if(!a.outside)break;if(r<0?o<=0:o>=l.height){a.hitSide=!0;break}o+=5*r}return a}function ke(t,e){var r=e.ch,n=e.ch;if(t){(e.xRel<0||n==t.length)&&r?--r:++n;for(var i=t.charAt(r),o=Cn(i)?Cn:/\s/.test(i)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!Cn(t)};0<r&&o(t.charAt(r-1));)--r;for(;n<t.length&&o(t.charAt(n));)++n}return{from:oe(e.line,r),to:oe(e.line,n)}}v.Pos=oe,v.prototype={constructor:v,focus:function(){window.focus(),St(this),Ct(this)},setOption:function(t,e){var r=this.options,n=r[t];r[t]==e&&"mode"!=t||(r[t]=e,Me.hasOwnProperty(t)&&mt(this,Me[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,r=0;r<e.length;++r)if(e[r]==t||"string"!=typeof e[r]&&e[r].name==t)return e.splice(r,1),!0},addOverlay:mt(null,function(t,e){var r=t.token?t:v.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:e&&e.opaque}),this.state.modeGen++,bt(this)}),removeOverlay:mt(null,function(t){for(var e=this.state.overlays,r=0;r<e.length;++r){var n=e[r].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(r,1),this.state.modeGen++,void bt(this)}}),indentLine:mt(null,function(t,e,r){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),fe(this.doc,t)&&Ce(this,t,e,r)}),indentSelection:mt(null,function(t){var e=this.doc.sel;if(le(e.from,e.to))return Ce(this,e.from.line,t);for(var r=e.to.line-(e.to.ch?0:1),n=e.from.line;n<=r;++n)Ce(this,n,t)}),getTokenAt:function(t,e){for(var r=this.doc,n=Y(this,(t=ce(r,t)).line,e),i=this.doc.mode,o=new Ke(Mr(r,t.line).text,this.options.tabSize);o.pos<t.ch&&!o.eol();){o.start=o.pos;var l=i.token(o,n)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,type:l||null,state:n}},getTokenTypeAt:function(t){t=ce(this.doc,t);var e=ur(this,Mr(this.doc,t.line)),r=0,n=(e.length-1)/2,i=t.ch;if(0==i)return e[2];for(;;){var o=r+n>>1;if((o?e[2*o-1]:0)>=i)n=o;else{if(!(e[2*o+1]<i))return e[2*o+2];r=1+o}}},getModeAt:function(t){var e=this.doc.mode;return e.innerMode?v.innerMode(e,this.getTokenAt(t).state).mode:e},getHelper:function(t,e){if(Ee.hasOwnProperty(e)){var r=Ee[e],n=this.getModeAt(t);return n[e]&&r[n[e]]||n.helperType&&r[n.helperType]||r[n.name]}},getStateAfter:function(t,e){var r=this.doc;return Y(this,(t=ue(r,null==t?r.first+r.size-1:t))+1,e)},cursorCoords:function(t,e){var r=this.doc.sel,n=null==t?r.head:"object"==typeof t?ce(this.doc,t):t?r.from:r.to;return lt(this,n,e||"page")},charCoords:function(t,e){return ot(this,ce(this.doc,t),e||"page")},coordsChar:function(t,e){return at(this,(t=it(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=it(this,{top:t,left:0},e||"page").top,Dr(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var r=!1,n=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:n<t&&(t=n,r=!0);var i=Mr(this.doc,t);return nt(this,Mr(this.doc,t),{top:0,left:0},e||"page").top+(r?i.height:0)},defaultTextHeight:function(){return ut(this.display)},defaultCharWidth:function(){return ct(this.display)},setGutterMarker:mt(null,function(t,r,n){return we(this,t,function(t){var e=t.gutterMarkers||(t.gutterMarkers={});return!(e[r]=n)&&wn(e)&&(t.gutterMarkers=null),1})}),clearGutter:mt(null,function(e){var r=this,t=r.doc,n=t.first;t.iter(function(t){t.gutterMarkers&&t.gutterMarkers[e]&&(t.gutterMarkers[e]=null,bt(r,n,n+1),wn(t.gutterMarkers)&&(t.gutterMarkers=null)),++n})}),addLineClass:mt(null,function(t,r,n){return we(this,t,function(t){var e="text"==r?"textClass":"background"==r?"bgClass":"wrapClass";if(t[e]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[e]))return;t[e]+=" "+n}else t[e]=n;return 1})}),removeLineClass:mt(null,function(t,o,l){return we(this,t,function(t){var e="text"==o?"textClass":"background"==o?"bgClass":"wrapClass",r=t[e];if(r){if(null==l)t[e]=null;else{var n=r.match(new RegExp("(?:^|\\s+)"+l+"(?:$|\\s+)"));if(!n)return;var i=n.index+n[0].length;t[e]=r.slice(0,n.index)+(n.index&&i!=r.length?" ":"")+r.slice(i)||null}return 1}})}),addLineWidget:mt(null,function(t,e,r){return function(n,t,e,r){var i=new nr(n,e,r);i.noHScroll&&(n.display.alignWidgets=!0);return we(n,t,function(t){var e,r=t.widgets||(t.widgets=[]);return null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,tr(n.doc,t)&&!i.showIfHidden||(e=Wr(n,t)<n.doc.scrollTop,Nr(t,t.height+or(i)),e&&xe(n,0,i.height)),1}),i}(this,t,e,r)}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!fe(this.doc,t))return null;var e=t;if(!(t=Mr(this.doc,t)))return null}else{if(null==(e=Hr(t)))return null}return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,r,n,i){var o,l,s,a,u,c,h,f,d=this.display,p=(t=lt(this,ce(this.doc,t))).bottom,g=t.left;e.style.position="absolute",d.sizer.appendChild(e),"over"==n?p=t.top:"above"!=n&&"near"!=n||(o=Math.max(d.wrapper.clientHeight,this.doc.height),l=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth),("above"==n||t.bottom+e.offsetHeight>o)&&t.top>e.offsetHeight?p=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=o&&(p=t.bottom),g+e.offsetWidth>l&&(g=l-e.offsetWidth)),e.style.top=p+"px",e.style.left=e.style.right="","right"==i?(g=d.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?g=0:"middle"==i&&(g=(d.sizer.clientWidth-e.offsetWidth)/2),e.style.left=g+"px"),r&&(s=this,u=p,c=(a=g)+e.offsetWidth,h=p+e.offsetHeight,null!=(f=ye(s,a,u,c,h)).scrollTop&&Ot(s,f.scrollTop),null!=f.scrollLeft&&Et(s,f.scrollLeft))},triggerOnKeyDown:mt(null,Ut),execCommand:function(t){return Fe[t](this)},findPosH:function(t,e,r,n){var i=1;e<0&&(i=-1,e=-e);for(var o=0,l=ce(this.doc,t);o<e&&!(l=Le(this.doc,l,i,r,n)).hitSide;++o);return l},moveH:mt(null,function(t,e){var r=this.doc.sel,n=r.shift||r.extend||le(r.from,r.to)?Le(this.doc,r.head,t,e,this.options.rtlMoveVisually):t<0?r.from:r.to;de(this.doc,n,n,t)}),deleteH:mt(null,function(t,e){var r=this.doc.sel;le(r.from,r.to)?ie(this.doc,"",r.from,Le(this.doc,r.head,t,e,!1),"+delete"):ie(this.doc,"",r.from,r.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,r,n){var i=1,o=n;e<0&&(i=-1,e=-e);for(var l=0,s=ce(this.doc,t);l<e;++l){var a=lt(this,s,"div");if(null==o?o=a.left:a.left=o,(s=Se(this,a,i,r)).hitSide)break}return s},moveV:mt(null,function(t,e){var r=this.doc.sel,n=lt(this,r.head,"div");null!=r.goalColumn&&(n.left=r.goalColumn);var i=Se(this,n,t,e);"page"==e&&xe(this,0,ot(this,i,"div").top-n.top),de(this.doc,i,i,t),r.goalColumn=n.left}),toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:mt(null,function(t,e){be(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-sn,width:t.scrollWidth-sn,clientHeight:t.clientHeight-sn,clientWidth:t.clientWidth-sn}},scrollIntoView:mt(null,function(t,e){null==t?t={from:this.doc.sel.head,to:null}:"number"==typeof t?t={from:oe(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),e=e||0;var r=t;null!=t.from.line&&(this.curOp.scrollToPos={from:t.from,to:t.to,margin:e},r={from:lt(this,t.from),to:lt(this,t.to)});var n=ye(this,Math.min(r.from.left,r.to.left),Math.min(r.from.top,r.to.top)-e,Math.max(r.from.right,r.to.right),Math.max(r.from.bottom,r.to.bottom)+e);be(this,n.scrollLeft,n.scrollTop)}),setSize:mt(null,function(t,e){function r(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(t){return yt(this,t)},refresh:mt(null,function(){var t=null==this.display.cachedTextHeight;tt(this),be(this,this.doc.scrollLeft,this.doc.scrollTop),bt(this),t&&T(this)}),swapDoc:mt(null,function(t){var e=this.doc;return e.cm=null,kr(this,t),tt(this),Lt(this,!0),be(this,t.scrollLeft,t.scrollTop),en(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},ln(v);var Me=v.optionHandlers={},Te=v.defaults={};function Ae(t,e,n,r){v.defaults[t]=e,n&&(Me[t]=r?function(t,e,r){r!=Ne&&n(t,e,r)}:n)}var Ne=v.Init={toString:function(){return"CodeMirror.Init"}};Ae("value","",function(t,e){t.setValue(e)},!0),Ae("mode",null,function(t,e){t.doc.modeOption=e,b(t)},!0),Ae("indentUnit",2,b,!0),Ae("indentWithTabs",!1),Ae("smartIndent",!0),Ae("tabSize",4,function(t){b(t),tt(t),bt(t)},!0),Ae("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(t,e){t.options.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),t.refresh()},!0),Ae("specialCharPlaceholder",function(t){var e=Sn("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e},function(t){t.refresh()},!0),Ae("electricChars",!0),Ae("rtlMoveVisually",!r),Ae("wholeLineUpdateBefore",!0),Ae("theme","default",function(t){N(t),H(t)},!0),Ae("keyMap","default",A),Ae("extraKeys",null),Ae("onKeyEvent",null),Ae("onDragEvent",null),Ae("lineWrapping",!1,function(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),O(t)),T(t),bt(t),tt(t),setTimeout(function(){z(t)},100)},!0),Ae("gutters",[],function(t){E(t.options),H(t)},!0),Ae("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?R(t.display)+"px":"0",t.refresh()},!0),Ae("coverGutterNextToScrollbar",!1,z,!0),Ae("lineNumbers",!1,function(t){E(t.options),H(t)},!0),Ae("firstLineNumber",1,H,!0),Ae("lineNumberFormatter",function(t){return t},H,!0),Ae("showCursorWhenSelecting",!1,K,!0),Ae("resetSelectionOnContextMenu",!0),Ae("readOnly",!1,function(t,e){"nocursor"==e?(Yt(t),t.display.input.blur(),t.display.disabled=!0):(t.display.disabled=!1,e||Lt(t,!0))}),Ae("dragDrop",!0),Ae("cursorBlinkRate",530),Ae("cursorScrollMargin",0),Ae("cursorHeight",1),Ae("workTime",100),Ae("workDelay",100),Ae("flattenSpans",!0),Ae("pollInterval",100),Ae("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),Ae("historyEventDelay",500),Ae("viewportMargin",10,function(t){t.refresh()},!0),Ae("maxHighlightLength",1e4,function(t){b(t),t.refresh()},!0),Ae("crudeMeasuringFrom",1e4),Ae("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),Ae("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),Ae("autofocus",null);var He=v.modes={},De=v.mimeModes={};v.defineMode=function(t,e){if(v.defaults.mode||"null"==t||(v.defaults.mode=t),2<arguments.length){e.dependencies=[];for(var r=2;r<arguments.length;++r)e.dependencies.push(arguments[r])}He[t]=e},v.defineMIME=function(t,e){De[t]=e},v.resolveMode=function(t){if("string"==typeof t&&De.hasOwnProperty(t))t=De[t];else if(t&&"string"==typeof t.name&&De.hasOwnProperty(t.name)){var e=De[t.name];(t=mn(e,t)).name=e.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return v.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},v.getMode=function(t,e){var e=v.resolveMode(e),r=He[e.name];if(!r)return v.getMode(t,"text/plain");var n=r(t,e);if(We.hasOwnProperty(e.name)){var i=We[e.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}return n.name=e.name,n},v.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),v.defineMIME("text/plain","null");var We=v.modeExtensions={};v.extendMode=function(t,e){vn(e,We.hasOwnProperty(t)?We[t]:We[t]={})},v.defineExtension=function(t,e){v.prototype[t]=e},v.defineDocExtension=function(t,e){Cr.prototype[t]=e},v.defineOption=Ae;var Oe=[];v.defineInitHook=function(t){Oe.push(t)};var Ee=v.helpers={};function ze(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var r={};for(var n in e){var i=e[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Ie(t,e,r){return!t.startState||t.startState(e,r)}v.registerHelper=function(t,e,r){Ee.hasOwnProperty(t)||(Ee[t]=v[t]={}),Ee[t][e]=r},v.isWordChar=Cn,v.copyState=ze,v.startState=Ie,v.innerMode=function(t,e){for(;t.innerMode;){var r=t.innerMode(e);if(!r||r.mode==t)break;e=r.state,t=r.mode}return r||{mode:t,state:e}};var Fe=v.commands={selectAll:function(t){t.setSelection(oe(t.firstLine(),0),oe(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),r=t.getCursor(!1),n=!le(e,r);n||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,n?r:oe(e.line),"+delete"):t.replaceRange("",e,oe(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",oe(e,0),oe(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",oe(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(oe(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(oe(t.lastLine()))},goLineStart:function(t){t.extendSelection(Xn(t,t.getCursor().line))},goLineStartSmart:function(t){var e,r,n=t.getCursor(),i=Xn(t,n.line),o=t.getLineHandle(i.line),l=Or(o);l&&0!=l[0].level?t.extendSelection(i):(e=Math.max(0,o.text.search(/\S/)),r=n.line==i.line&&n.ch<=e&&n.ch,t.extendSelection(oe(i.line,r?0:e)))},goLineEnd:function(t){t.extendSelection(function(t,e){var r,n;for(;r=Qe(n=Mr(t.doc,e));)e=r.find().to.line;var i=Or(n),o=i?(i[0].level%2?Kn:Un)(n):n.text.length;return oe(e,o)}(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("\t","end","+input")},transposeChars:function(t){var e=t.getCursor(),r=t.getLine(e.line);0<e.ch&&e.ch<r.length-1&&t.replaceRange(r.charAt(e.ch)+r.charAt(e.ch-1),oe(e.line,e.ch-1),oe(e.line,e.ch+1))},newlineAndIndent:function(t){mt(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},Pe=v.keyMap={};function Re(t){return"string"==typeof t?Pe[t]:t}function Be(s,t,a){for(var e=0;e<t.length;++e){var r=function t(e){var r=(e=Re(e))[s];if(!1===r)return"stop";if(null!=r&&a(r))return!0;if(e.nofallthrough)return"stop";var n=e.fallthrough;if(null==n)return!1;if("[object Array]"!=Object.prototype.toString.call(n))return t(n);for(var i=0,o=n.length;i<o;++i){var l=t(n[i]);if(l)return l}return!1}(t[e]);if(r)return"stop"!=r}}function Ge(t){var e=Bn[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Ve(t,e){if(f&&34==t.keyCode&&t.char)return!1;var r=Bn[t.keyCode];return null!=r&&!t.altGraphKey&&(t.altKey&&(r="Alt-"+r),(o?t.metaKey:t.ctrlKey)&&(r="Ctrl-"+r),(o?t.ctrlKey:t.metaKey)&&(r="Cmd-"+r),!e&&t.shiftKey&&(r="Shift-"+r),r)}function Ke(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function Ue(t,e){this.lines=[],this.type=e,this.doc=t}function Xe(i,o,l,t,e){if(t&&t.shared)return function(t,r,n,i,o){(i=vn(i)).shared=!1;var l=[Xe(t,r,n,i,o)],s=l[0],a=i.replacedWith;return Sr(t,function(t){a&&(i.replacedWith=a.cloneNode(!0)),l.push(Xe(t,ce(t,r),ce(t,n),i,o));for(var e=0;e<t.linked.length;++e)if(t.linked[e].isParent)return;s=dn(l)}),new _e(l,s)}(i,o,l,t,e);if(i.cm&&!i.cm.curOp)return mt(i.cm,Xe)(i,o,l,t,e);var s=new Ue(i,e);if(se(l,o)||le(o,l)&&"range"==e&&(!t.inclusiveLeft||!t.inclusiveRight))return s;t&&vn(t,s),s.replacedWith&&(s.collapsed=!0,s.replacedWith=Sn("span",[s.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||(s.replacedWith.ignoreEvents=!0)),s.collapsed&&(y=!0),s.addToHistory&&Fr(i,{from:o,to:l,origin:"markText"},{head:i.sel.head,anchor:i.sel.anchor},NaN);var a,u,c,h=o.line,f=0,d=i.cm;if(i.iter(h,l.line+1,function(t){d&&s.collapsed&&!d.options.lineWrapping&&Je(i,t)==d.display.maxLine&&(c=!0);var e,r,n={from:null,to:null,marker:s};f+=t.text.length,h==o.line&&(n.from=o.ch,f-=o.ch),h==l.line&&(n.to=l.ch,f-=t.text.length-l.ch),s.collapsed&&(h==l.line&&(u=Ze(t,l.ch)),h==o.line?a=Ze(t,o.ch):Nr(t,0)),r=n,(e=t).markedSpans=e.markedSpans?e.markedSpans.concat([r]):[r],r.marker.attachLine(e),++h}),s.collapsed&&i.iter(o.line,l.line+1,function(t){tr(i,t)&&Nr(t,0)}),s.clearOnEnter&&Zr(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(p=!0,(i.history.done.length||i.history.undone.length)&&i.clearHistory()),s.collapsed){if(a!=u)throw new Error("Inserting collapsed marker overlapping an existing one");s.size=f,s.atomic=!0}return d&&(c&&(d.curOp.updateMaxLine=!0),(s.className||s.title||s.startStyle||s.endStyle||s.collapsed)&&bt(d,o.line,l.line+1),s.atomic&&ge(d)),s}function _e(t,e){this.markers=t,this.primary=e;for(var r=0,n=this;r<t.length;++r)t[r].parent=this,Zr(t[r],"clear",function(){n.clear()})}function Ye(t,e){if(t)for(var r=0;r<t.length;++r){var n=t[r];if(n.marker==e)return n}}function je(t,e){var r=fe(t,e.from.line)&&Mr(t,e.from.line).markedSpans,n=fe(t,e.to.line)&&Mr(t,e.to.line).markedSpans;if(!r&&!n)return null;var i=e.from.ch,o=e.to.ch,l=le(e.from,e.to),s=function(t,e,r){if(t)for(var n,i=0;i<t.length;++i){var o,l=t[i],s=l.marker;!(null==l.from||(s.inclusiveLeft?l.from<=e:l.from<e))&&(!(s.inclusiveLeft&&s.inclusiveRight||"bookmark"==s.type)||l.from!=e||r&&l.marker.insertLeft)||(o=null==l.to||(s.inclusiveRight?l.to>=e:l.to>e),(n=n||[]).push({from:l.from,to:o?null:l.to,marker:s}))}return n}(r,i,l),a=function(t,e,r){if(t)for(var n,i=0;i<t.length;++i){var o,l=t[i],s=l.marker;!(null==l.to||(s.inclusiveRight?l.to>=e:l.to>e))&&("bookmark"!=s.type||l.from!=e||r&&!l.marker.insertLeft)||(o=null==l.from||(s.inclusiveLeft?l.from<=e:l.from<e),(n=n||[]).push({from:o?null:l.from-e,to:null==l.to?null:l.to-e,marker:s}))}return n}(n,o,l),u=1==e.text.length,c=dn(e.text).length+(u?i:0);if(s)for(var h=0;h<s.length;++h){null==(f=s[h]).to&&((d=Ye(a,f.marker))?u&&(f.to=null==d.to?null:d.to+c):f.to=i)}if(a)for(var f,d,h=0;h<a.length;++h){null!=(f=a[h]).to&&(f.to+=c),null==f.from?(d=Ye(s,f.marker))||(f.from=c,u&&(s=s||[]).push(f)):(f.from+=c,u&&(s=s||[]).push(f))}if(u&&s){for(h=0;h<s.length;++h)null!=s[h].from&&s[h].from==s[h].to&&"bookmark"!=s[h].marker.type&&s.splice(h--,1);s.length||(s=null)}var p=[s];if(!u){var g,m=e.text.length-2;if(0<m&&s)for(h=0;h<s.length;++h)null==s[h].to&&(g=g||[]).push({from:null,to:null,marker:s[h].marker});for(h=0;h<m;++h)p.push(g);p.push(a)}return p}function $e(t,e){var r=function(t,e){var r=e["spans_"+t.id];if(!r)return null;for(var n=0,i=[];n<e.text.length;++n)i.push(function(t){if(!t)return null;for(var e,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?e=e||t.slice(0,r):e&&e.push(t[r]);return e?e.length?e:null:t}(r[n]));return i}(t,e),n=je(t,e);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)t:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue t;o.push(a)}else l&&(r[i]=l)}return r}function Ze(t,e){var r,n=y&&t.markedSpans;if(n)for(var i,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&(null==i.from||i.from<e)&&(null==i.to||i.to>e)&&(!r||r.width<i.marker.width)&&(r=i.marker);return r}function qe(t){return Ze(t,-1)}function Qe(t){return Ze(t,t.text.length+1)}function Je(t,e){for(var r;r=qe(e);)e=Mr(t,r.find().from.line);return e}function tr(t,e){var r=y&&e.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return 1;if(!n.marker.replacedWith&&0==n.from&&n.marker.inclusiveLeft&&function t(e,r,n){if(null==n.to){var i=n.marker.find().to,o=Mr(e,i.line);return t(e,o,Ye(o.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==r.text.length)return!0;for(var l,s=0;s<r.markedSpans.length;++s)if((l=r.markedSpans[s]).marker.collapsed&&!l.marker.replacedWith&&l.from==n.to&&(l.marker.inclusiveLeft||n.marker.inclusiveRight)&&t(e,r,l))return!0}(t,e,n))return 1}}function er(t){var e=t.markedSpans;if(e){for(var r=0;r<e.length;++r)e[r].marker.detachLine(t);t.markedSpans=null}}function rr(t,e){if(e){for(var r=0;r<e.length;++r)e[r].marker.attachLine(t);t.markedSpans=e}}Pe.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},Pe.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},Pe.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},Pe.default=x?Pe.macDefault:Pe.pcDefault,Pe.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},v.lookupKey=Be,v.isModifierKey=Ge,v.keyName=Ve,v.fromTextArea=function(e,t){if((t=t||{}).value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=document.body;try{r=document.activeElement}catch(t){}t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=s.getValue()}if(e.form&&(Zr(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var i=e.form,o=i.submit;try{var l=i.submit=function(){n(),i.submit=o,i.submit(),i.submit=l}}catch(t){}}e.style.display="none";var s=v(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return s.save=n,s.getTextArea=function(){return e},s.toTextArea=function(){n(),e.parentNode.removeChild(s.getWrapperElement()),e.style.display="",e.form&&(qr(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=o))},s},Ke.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){var e=this.string.indexOf(t,this.pos);if(-1<e)return this.pos=e,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=cn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return cn(this.string,null,this.tabSize)},match:function(t,e,r){if("string"!=typeof t){var n=this.string.slice(this.pos).match(t);return n&&0<n.index?null:(n&&!1!==e&&(this.pos+=n[0].length),n)}function i(t){return r?t.toLowerCase():t}if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},v.StringStream=Ke,ln(v.TextMarker=Ue),Ue.prototype.clear=function(){if(!this.explicitlyCleared){var t,e=this.doc.cm,r=e&&!e.curOp;r&&pt(e),!on(this,"clear")||(t=this.find())&&en(this,"clear",t.from,t.to);for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=Ye(l.markedSpans,this);null!=s.to&&(i=Hr(l)),l.markedSpans=function(t,e){for(var r,n=0;n<t.length;++n)t[n]!=e&&(r=r||[]).push(t[n]);return r}(l.markedSpans,s),null!=s.from?n=Hr(l):this.collapsed&&!tr(this.doc,l)&&e&&Nr(l,ut(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(o=0;o<this.lines.length;++o){var a=Je(e.doc,this.lines[o]),u=W(e.doc,a);u>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=u,e.display.maxLineChanged=!0)}null!=n&&e&&bt(e,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&ge(e)),r&&gt(e)}},Ue.prototype.find=function(){for(var t,e,r=0;r<this.lines.length;++r){var n,i=this.lines[r],o=Ye(i.markedSpans,this);null==o.from&&null==o.to||(n=Hr(i),null!=o.from&&(t=oe(n,o.from)),null!=o.to&&(e=oe(n,o.to)))}return"bookmark"==this.type?t:t&&{from:t,to:e}},Ue.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){"bookmark"!=this.type&&(t=t.from);var r,n=Mr(this.doc,t.line);if((r=q(e,n))&&(r.text=r.measure=r.markedSpans=null),t.line>=e.display.showingFrom&&t.line<e.display.showingTo){for(var i=e.display.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj==n){i.offsetHeight!=n.height&&Nr(n,i.offsetHeight);break}yt(e,function(){e.curOp.selectionChanged=e.curOp.forceUpdate=e.curOp.updateMaxLine=!0})}}},Ue.prototype.attachLine=function(t){var e;!this.lines.length&&this.doc.cm&&((e=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=gn(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)),this.lines.push(t)},Ue.prototype.detachLine=function(t){var e;this.lines.splice(gn(this.lines,t),1),!this.lines.length&&this.doc.cm&&((e=this.doc.cm.curOp).maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)},ln(v.SharedTextMarker=_e),_e.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();en(this,"clear")}},_e.prototype.find=function(){return this.primary.find()};var nr=v.LineWidget=function(t,e,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=t,this.node=e};function ir(r){return function(){var t=!this.cm.curOp;t&&pt(this.cm);try{var e=r.apply(this,arguments)}finally{t&&gt(this.cm)}return e}}function or(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||Mn(t.cm.display.measure,Sn("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}ln(nr),nr.prototype.clear=ir(function(){var t=this.line.widgets,e=Hr(this.line);if(null!=e&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(this.line.widgets=null);var n=Wr(this.cm,this.line)<this.cm.doc.scrollTop;Nr(this.line,Math.max(0,this.line.height-or(this))),n&&xe(this.cm,0,-this.height),bt(this.cm,e,e+1)}}),nr.prototype.changed=ir(function(){var t=this.height;this.height=null;var e,r=or(this)-t;r&&(Nr(this.line,this.line.height+r),e=Hr(this.line),bt(this.cm,e,e+1))});var lr=v.Line=function(t,e,r){this.text=t,rr(this,e),this.height=r?r(this):1};function sr(t,e,r,n,i,o){var l=r.flattenSpans;null==l&&(l=t.options.flattenSpans);var s,a=0,u=null,c=new Ke(e,t.options.tabSize);for(""==e&&r.blankLine&&r.blankLine(n);!c.eol();)s=c.pos>t.options.maxHighlightLength?(l=!1,o&&cr(t,e,n,c.pos),c.pos=e.length,null):r.token(c,n),l&&u==s||(a<c.start&&i(c.start,u),a=c.start,u=s),c.start=c.pos;for(;a<c.pos;){var h=Math.min(c.pos,a+5e4);i(h,u),a=h}}function ar(t,e,r,n){var o=[t.state.modeGen];sr(t,e.text,t.doc.mode,r,function(t,e){o.push(t,e)},n);for(var i=0;i<t.state.overlays.length;++i){var l=t.state.overlays[i],s=1,a=0;sr(t,e.text,l.mode,!0,function(t,e){for(var r=s;a<t;){var n=o[s];t<n&&o.splice(s,1,t,o[s+1],n),s+=2,a=Math.min(t,n)}if(e)if(l.opaque)o.splice(r,s-r,t,e),s=r+2;else for(;r<s;r+=2){var i=o[r+1];o[r+1]=i?i+" "+e:e}})}return o}function ur(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=ar(t,e,e.stateAfter=Y(t,Hr(e)))),e.styles}function cr(t,e,r,n){var i=t.doc.mode,o=new Ke(e,t.options.tabSize);for(o.start=o.pos=n||0,""==e&&i.blankLine&&i.blankLine(r);!o.eol()&&o.pos<=t.options.maxHighlightLength;)i.token(o,r),o.start=o.pos}ln(lr),lr.prototype.lineNo=function(){return Hr(this)};var hr={};function fr(t,e){if(!t)return null;for(;;){var r=t.match(/(?:^|\s)line-(background-)?(\S+)/);if(!r)break;t=t.slice(0,r.index)+t.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==e[n]?e[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(e[n])||(e[n]+=" "+r[2])}return hr[t]||(hr[t]="cm-"+t.replace(/ +/g," cm-"))}function dr(t,e,r,n){for(var i,o=e,l=!0;i=qe(o);)o=Mr(t.doc,i.find().from.line);var s,a,u,c,h,f={pre:Sn("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:t,copyWidgets:n};do{o.text&&(l=!1),f.measure=o==e&&r,f.pos=0,f.addToken=f.measure?gr:pr,(w||L)&&t.getOption("lineWrapping")&&(f.addToken=function(l){function s(t){for(var e=" ",r=0;r<t.length-2;++r)e+=r%2?" ":" ";return e+=" "}return function(t,e,r,n,i,o){return l(t,e.replace(/ {3,}/g,s),r,n,i,o)}}(f.addToken));var d=function(t,e,r){var n=t.markedSpans,i=t.text,o=0;if(!n){for(var l=1;l<r.length;l+=2)e.addToken(e,i.slice(o,o=r[l]),fr(r[l+1],e));return}for(var s,a,u,c,h,f,d=i.length,p=0,l=1,g="",m=0;;){if(m==p){a=u=c=h="",f=null,m=1/0;for(var v=[],y=0;y<n.length;++y){var b=n[y],x=b.marker;b.from<=p&&(null==b.to||b.to>p)?(null!=b.to&&m>b.to&&(m=b.to,u=""),x.className&&(a+=" "+x.className),x.startStyle&&b.from==p&&(c+=" "+x.startStyle),x.endStyle&&b.to==m&&(u+=" "+x.endStyle),x.title&&!h&&(h=x.title),x.collapsed&&(!f||f.marker.size<x.size)&&(f=b)):b.from>p&&m>b.from&&(m=b.from),"bookmark"==x.type&&b.from==p&&x.replacedWith&&v.push(x)}if(f&&(f.from||0)==p&&(mr(e,(null==f.to?d:f.to)-p,f.marker,null==f.from),null==f.to))return f.marker.find();if(!f&&v.length)for(y=0;y<v.length;++y)mr(e,0,v[y])}if(d<=p)break;for(var C=Math.min(d,m);;){if(g){var w,L=p+g.length;if(f||(w=C<L?g.slice(0,C-p):g,e.addToken(e,w,s?s+a:a,c,p+w.length==m?u:"",h)),C<=L){g=g.slice(C-p),p=C;break}p=L,c=""}g=i.slice(o,o=r[l++]),s=fr(r[l++],e)}}}(o,f,ur(t,o));r&&o==e&&!f.measuredSomething&&(r[0]=f.pre.appendChild(En(t.display.measure)),f.measuredSomething=!0),d&&(o=Mr(t.doc,d.to.line))}while(d);!r||f.measuredSomething||r[0]||(r[0]=f.pre.appendChild(l?Sn("span"," "):En(t.display.measure))),f.pre.firstChild||tr(t.doc,e)||f.pre.appendChild(document.createTextNode(" ")),r&&(w||g)&&(s=Or(o))&&(s[a=s.length-1].from==s[a].to&&--a,u=s[a],c=s[a-1],u.from+1==u.to&&c&&u.level<c.level&&((h=r[f.pos-1])&&h.parentNode.insertBefore(h.measureRight=En(t.display.measure),h.nextSibling)));var p=f.textClass?f.textClass+" "+(e.textClass||""):e.textClass;return p&&(f.pre.className=p),Qr(t,"renderLine",t,e,f.pre),f}function pr(t,e,r,n,i,o){if(e){var l=t.cm.options.specialChars;if(l.test(e))for(var s=document.createDocumentFragment(),a=0;;){l.lastIndex=a;var u,c,h=l.exec(e),f=h?h.index-a:e.length-a;if(f&&(s.appendChild(document.createTextNode(e.slice(a,a+f))),t.col+=f),!h)break;a+=1+f,"\t"==h[0]?(c=(u=t.cm.options.tabSize)-t.col%u,s.appendChild(Sn("span",fn(c),"cm-tab")),t.col+=c):(p=t.cm.options.specialCharPlaceholder(h[0]),s.appendChild(p),t.col+=1)}else{t.col+=e.length;var s=document.createTextNode(e)}if(r||n||i||t.measure){var d=r||"";n&&(d+=n),i&&(d+=i);var p=Sn("span",[s],d);return o&&(p.title=o),t.pre.appendChild(p)}t.pre.appendChild(s)}}function gr(t,e,r,n,i){for(var o=t.cm.options.lineWrapping,l=0;l<e.length;++l){var s=e.charAt(l),a=0==l;"\ud800"<=s&&s<"\udbff"&&l<e.length-1?(s=e.slice(l,l+2),++l):l&&o&&Wn(e,l)&&t.pre.appendChild(Sn("wbr"));var u=t.measure[t.pos],c=t.measure[t.pos]=pr(t,s,r,a&&n,l==e.length-1&&i);u&&(c.leftSide=u.leftSide||u),w&&o&&" "==s&&l&&!/\s/.test(e.charAt(l-1))&&l<e.length-1&&!/\s/.test(e.charAt(l+1))&&(c.style.whiteSpace="normal"),t.pos+=s.length}e.length&&(t.measuredSomething=!0)}function mr(t,e,r,n){var i=!n&&r.replacedWith;if(i&&(t.copyWidgets&&(i=i.cloneNode(!0)),t.pre.appendChild(i),t.measure)){if(e)t.measure[t.pos]=i;else{var o=En(t.cm.display.measure);if("bookmark"!=r.type||r.insertLeft){if(t.measure[t.pos])return;t.measure[t.pos]=t.pre.insertBefore(o,i)}else t.measure[t.pos]=t.pre.appendChild(o)}t.measuredSomething=!0}t.pos+=e}function vr(t,n,e,r,i){function o(t){return e?e[t]:null}function l(t,e,r){!function(t,e,r,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),er(t),rr(t,r);var i=n?n(t):1;i!=t.height&&Nr(t,i)}(t,e,r,i),en(t,"change",t,n)}var s=n.from,a=n.to,u=n.text,c=Mr(t,s.line),h=Mr(t,a.line),f=dn(u),d=o(u.length-1),p=a.line-s.line;if(0!=s.ch||0!=a.ch||""!=f||t.cm&&!t.cm.options.wholeLineUpdateBefore)if(c==h)if(1==u.length)l(c,c.text.slice(0,s.ch)+f+c.text.slice(a.ch),d);else{for(v=[],g=1,m=u.length-1;g<m;++g)v.push(new lr(u[g],o(g),i));v.push(new lr(f+c.text.slice(a.ch),d,i)),l(c,c.text.slice(0,s.ch)+u[0],o(0)),t.insert(s.line+1,v)}else if(1==u.length)l(c,c.text.slice(0,s.ch)+u[0]+h.text.slice(a.ch),o(0)),t.remove(s.line+1,p);else{l(c,c.text.slice(0,s.ch)+u[0],o(0)),l(h,f+h.text.slice(a.ch),d);for(g=1,m=u.length-1,v=[];g<m;++g)v.push(new lr(u[g],o(g),i));1<p&&t.remove(s.line+1,p-1),t.insert(s.line+1,v)}else{for(var g=0,m=u.length-1,v=[];g<m;++g)v.push(new lr(u[g],o(g),i));l(h,h.text,d),p&&t.remove(s.line,p),v.length&&t.insert(s.line,v)}en(t,"change",t,n),pe(t,r.anchor,r.head,null,!0)}function yr(t){this.lines=t,this.parent=null;for(var e=0,r=t.length,n=0;e<r;++e)t[e].parent=this,n+=t[e].height;this.height=n}function br(t){for(var e=0,r=0,n=0,i=(this.children=t).length;n<i;++n){var o=t[n];e+=o.chunkSize(),r+=o.height,o.parent=this}this.size=e,this.height=r,this.parent=null}yr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var r,n=t,i=t+e;n<i;++n){var o=this.lines[n];this.height-=o.height,(r=o).parent=null,er(r),en(o,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,r){this.height+=r,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0,i=e.length;n<i;++n)e[n].parent=this},iterN:function(t,e,r){for(var n=t+e;t<n;++t)if(r(this.lines[t]))return!0}},br.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var r,n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(t<o){var l=Math.min(e,o-t),s=i.height;if(i.removeInner(t,l),this.height-=s-i.height,o==l&&(this.children.splice(n--,1),i.parent=null),0==(e-=l))break;t=0}else t-=o}this.size-e<25&&(r=[],this.collapse(r),this.children=[new yr(r)],this.children[0].parent=this)},collapse:function(t){for(var e=0,r=this.children.length;e<r;++e)this.children[e].collapse(t)},insertInner:function(t,e,r){this.size+=e.length,this.height+=r;for(var n=0,i=this.children.length;n<i;++n){var o=this.children[n],l=o.chunkSize();if(t<=l){if(o.insertInner(t,e,r),o.lines&&50<o.lines.length){for(;50<o.lines.length;){var s=new yr(o.lines.splice(o.lines.length-25,25));o.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}t-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e,r,n=new br(t.children.splice(t.children.length-5,5));t.parent?(t.size-=n.size,t.height-=n.height,e=gn(t.parent.children,t),t.parent.children.splice(e+1,0,n)):(((r=new br(t.children)).parent=t).children=[r,n],t=r),n.parent=t.parent}while(10<t.children.length);t.parent.maybeSpill()}},iterN:function(t,e,r){for(var n=0,i=this.children.length;n<i;++n){var o=this.children[n],l=o.chunkSize();if(t<l){var s=Math.min(e,l-t);if(o.iterN(t,s,r))return!0;if(0==(e-=s))break;t=0}else t-=l}}};var xr=0,Cr=v.Doc=function(t,e,r){if(!(this instanceof Cr))return new Cr(t,e,r);null==r&&(r=0),br.call(this,[new yr([new lr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=Er(),this.cleanGeneration=1;var n=oe(this.frontier=r,0);this.sel={from:n,to:n,head:n,anchor:n,shift:!1,extend:!1,goalColumn:null},this.id=++xr,this.modeOption=e,"string"==typeof t&&(t=zn(t)),vr(this,{from:n,to:n,text:t},null,{head:n,anchor:n})};Cr.prototype=mn(br.prototype,{constructor:Cr,iter:function(t,e,r){r?this.iterN(t-this.first,e-t,r):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var r=0,n=0,i=e.length;n<i;++n)r+=e[n].height;this.insertInner(t-this.first,e,r)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Ar(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:function(t){var e=oe(this.first,0),r=this.first+this.size-1;Jt(this,{from:e,to:oe(r,Mr(this,r).text.length),text:zn(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,r,n){ie(this,t,e=ce(this,e),r=r?ce(this,r):e,n)},getRange:function(t,e,r){var n=Tr(this,ce(this,t),ce(this,e));return!1===r?n:n.join(r||"\n")},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},setLine:function(t,e){fe(this,t)&&ie(this,e,oe(t,0),ce(this,oe(t)))},removeLine:function(t){t?ie(this,"",ce(this,oe(t-1)),ce(this,oe(t))):ie(this,"",oe(0,0),ce(this,oe(1,0)))},getLineHandle:function(t){if(fe(this,t))return Mr(this,t)},getLineNumber:Hr,getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Mr(this,t)),Je(this,t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return ce(this,t)},getCursor:function(t){var e=this.sel,r=null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||!1===t?e.to:e.from;return ae(r)},somethingSelected:function(){return!le(this.sel.head,this.sel.anchor)},setCursor:vt(function(t,e,r){var n=ce(this,"number"==typeof t?oe(t,e||0):t);r?de(this,n):pe(this,n,n)}),setSelection:vt(function(t,e,r){pe(this,ce(this,t),ce(this,e||t),r)}),extendSelection:vt(function(t,e,r){de(this,ce(this,t),e&&ce(this,e),r)}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,r){Jt(this,{from:this.sel.from,to:this.sel.to,text:zn(t),origin:r},e||"around")},undo:vt(function(){ee(this,"undo")}),redo:vt(function(){ee(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=Er(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Pr(this.history.done),undone:Pr(this.history.undone)}},setHistory:function(t){var e=this.history=Er(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,r){return Xe(this,ce(this,t),ce(this,e),r,"range")},setBookmark:function(t,e){var r={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return Xe(this,t=ce(this,t),t,r,"bookmark")},findMarksAt:function(t){var e=[],r=Mr(this,(t=ce(this,t)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},getAllMarks:function(){var n=[];return this.iter(function(t){var e=t.markedSpans;if(e)for(var r=0;r<e.length;++r)null!=e[r].from&&n.push(e[r].marker)}),n},posFromIndex:function(r){var n,i=this.first;return this.iter(function(t){var e=t.text.length+1;if(r<e)return n=r,!0;r-=e,++i}),ce(this,oe(i,n))},indexFromPos:function(t){var e=(t=ce(this,t)).ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new Cr(Ar(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t=t||{};var e=this.first,r=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<r&&(r=t.to);var n=new Cr(Ar(this,e,r),t.mode||this.modeOption,e);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],n},unlinkDoc:function(t){if(t instanceof v&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this);break}}var r;t.history==this.history&&(r=[t.id],Sr(t,function(t){r.push(t.id)},!0),t.history=Er(),t.history.done=Pr(this.history.done,r),t.history.undone=Pr(this.history.undone,r))},iterLinkedDocs:function(t){Sr(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),Cr.prototype.eachLine=Cr.prototype.iter;var wr="iter insert remove copy getEditor".split(" ");for(var Lr in Cr.prototype)Cr.prototype.hasOwnProperty(Lr)&&gn(wr,Lr)<0&&(v.prototype[Lr]=function(t){return function(){return t.apply(this.doc,arguments)}}(Cr.prototype[Lr]));function Sr(t,s,a){!function t(e,r,n){if(e.linked)for(var i=0;i<e.linked.length;++i){var o,l=e.linked[i];l.doc!=r&&(o=n&&l.sharedHist,a&&!o||(s(l.doc,o),t(l.doc,e,o)))}}(t,null,!0)}function kr(t,e){if(e.cm)throw new Error("This document is already in use.");T((t.doc=e).cm=t),b(t),t.options.lineWrapping||O(t),t.options.mode=e.modeOption,bt(t)}function Mr(t,e){for(e-=t.first;!t.lines;)for(var r=0;;++r){var n=t.children[r],i=n.chunkSize();if(e<i){t=n;break}e-=i}return t.lines[e]}function Tr(t,r,n){var i=[],o=r.line;return t.iter(r.line,n.line+1,function(t){var e=t.text;o==n.line&&(e=e.slice(0,n.ch)),o==r.line&&(e=e.slice(r.ch)),i.push(e),++o}),i}function Ar(t,e,r){var n=[];return t.iter(e,r,function(t){n.push(t.text)}),n}function Nr(t,e){for(var r=e-t.height,n=t;n;n=n.parent)n.height+=r}function Hr(t){if(null==t.parent)return null;for(var e=t.parent,r=gn(e.lines,t),n=e.parent;n;n=(e=n).parent)for(var i=0;n.children[i]!=e;++i)r+=n.children[i].chunkSize();return r+e.first}function Dr(t,e){var r=t.first;t:do{for(var n=0,i=t.children.length;n<i;++n){var o=t.children[n],l=o.height;if(e<l){t=o;continue t}e-=l,r+=o.chunkSize()}return r}while(!t.lines);for(n=0,i=t.lines.length;n<i;++n){var s=t.lines[n].height;if(e<s)break;e-=s}return r+n}function Wr(t,e){for(var r=0,n=(e=Je(t.doc,e)).parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==e)break;r+=o.height}for(var l=n.parent;l;l=(n=l).parent)for(i=0;i<l.children.length;++i){var s=l.children[i];if(s==n)break;r+=s.height}return r}function Or(t){var e=t.order;return null==e&&(e=t.order=ni(t.text)),e}function Er(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function zr(e,r,t,n){var i=r["spans_"+e.id],o=0;e.iter(Math.max(e.first,t),Math.min(e.first+e.size,n),function(t){t.markedSpans&&((i=i||(r["spans_"+e.id]={}))[o]=t.markedSpans),++o})}function Ir(t,e){var r={from:{line:e.from.line,ch:e.from.ch},to:$t(e),text:Tr(t,e.from,e.to)};return zr(t,r,e.from.line,e.to.line+1),Sr(t,function(t){zr(t,r,e.from.line,e.to.line+1)},!0),r}function Fr(t,e,r,n){var i=t.history;i.undone.length=0;var o=+new Date,l=dn(i.done);if(l&&(i.lastOp==n||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&i.lastTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var s=dn(l.changes);le(e.from,e.to)&&le(e.from,s.to)?s.to=$t(e):l.changes.push(Ir(t,e)),l.anchorAfter=r.anchor,l.headAfter=r.head}else for(l={changes:[Ir(t,e)],generation:i.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:r.anchor,headAfter:r.head},i.done.push(l),i.generation=++i.maxGeneration;i.done.length>i.undoDepth;)i.done.shift();i.lastTime=o,i.lastOp=n,i.lastOrigin=e.origin}function Pr(t,e){for(var r=0,n=[];r<t.length;++r){var i=t[r],o=i.changes,l=[];n.push({changes:l,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var s=0;s<o.length;++s){var a,u=o[s];if(l.push({from:u.from,to:u.to,text:u.text}),e)for(var c in u)(a=c.match(/^spans_(\d+)$/))&&-1<gn(e,Number(a[1]))&&(dn(l)[c]=u[c],delete u[c])}}return n}function Rr(t,e,r,n){r<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function Br(t,e,r,n){for(var i=0;i<t.length;++i){for(var o=t[i],l=!0,s=0;s<o.changes.length;++s){var a=o.changes[s];if(o.copied||(a.from=ae(a.from),a.to=ae(a.to)),r<a.from.line)a.from.line+=n,a.to.line+=n;else if(e<=a.to.line){l=!1;break}}o.copied||(o.anchorBefore=ae(o.anchorBefore),o.headBefore=ae(o.headBefore),o.anchorAfter=ae(o.anchorAfter),o.readAfter=ae(o.headAfter),o.copied=!0),l?(Rr(o.anchorBefore),Rr(o.headBefore),Rr(o.anchorAfter),Rr(o.headAfter)):(t.splice(0,i+1),i=0)}}function Gr(t,e){var r=e.from.line,n=e.to.line,i=e.text.length-(n-r)-1;Br(t.done,r,n,i),Br(t.undone,r,n,i)}function Vr(){Yr(this)}function Kr(t){return t.stop||(t.stop=Vr),t}function Ur(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Xr(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function _r(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function Yr(t){Ur(t),Xr(t)}function jr(t){return t.target||t.srcElement}function $r(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),x&&t.ctrlKey&&1==e&&(e=3),e}function Zr(t,e,r){var n;t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):((n=t._handlers||(t._handlers={}))[e]||(n[e]=[])).push(r)}function qr(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.detachEvent)t.detachEvent("on"+e,r);else{var n=t._handlers&&t._handlers[e];if(!n)return;for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}}function Qr(t,e){var r=t._handlers&&t._handlers[e];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}ln(Cr),v.e_stop=Yr,v.e_preventDefault=Ur,v.e_stopPropagation=Xr;var Jr,tn=0;function en(t,e){var r=t._handlers&&t._handlers[e];if(r){var n=Array.prototype.slice.call(arguments,2);Jr||(++tn,Jr=[],setTimeout(nn,0));for(var i=0;i<r.length;++i)Jr.push(function(t){return function(){t.apply(null,n)}}(r[i]))}}function rn(t,e,r){return Qr(t,r||e.type,t,e),_r(e)||e.codemirrorIgnore}function nn(){--tn;var t=Jr;Jr=null;for(var e=0;e<t.length;++e)t[e]()}function on(t,e){var r=t._handlers&&t._handlers[e];return r&&0<r.length}function ln(t){t.prototype.on=function(t,e){Zr(this,t,e)},t.prototype.off=function(t,e){qr(this,t,e)}}v.on=Zr,v.off=qr,v.signal=Qr;var sn=30,an=v.Pass={toString:function(){return"CodeMirror.Pass"}};function un(){this.id=null}function cn(t,e,r,n,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=n||0,l=i||0;o<e;++o)"\t"==t.charAt(o)?l+=r-l%r:++l;return l}un.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},v.countColumn=cn;var hn=[""];function fn(t){for(;hn.length<=t;)hn.push(dn(hn)+" ");return hn[t]}function dn(t){return t[t.length-1]}function pn(t){if(h)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(t){}}function gn(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;++r)if(t[r]==e)return r;return-1}function mn(t,e){function r(){}r.prototype=t;var n=new r;return e&&vn(e,n),n}function vn(t,e){for(var r in e=e||{},t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function yn(t){for(var e=[],r=0;r<t;++r)e.push(void 0);return e}function bn(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}var xn=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Cn(t){return/\w/.test(t)||""<t&&(t.toUpperCase()!=t.toLowerCase()||xn.test(t))}function wn(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return;return 1}var Ln=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\u1DC0–\u1DFF\u20D0–\u20FF\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff\uFE20–\uFE2F]/;function Sn(t,e,r,n){var i=document.createElement(t);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof e)Tn(i,e);else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function kn(t){for(var e=t.childNodes.length;0<e;--e)t.removeChild(t.firstChild);return t}function Mn(t,e){return kn(t).appendChild(e)}function Tn(t,e){C?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function An(t){return t.getBoundingClientRect()}v.replaceGetRect=function(t){An=t};var Nn,Hn,Dn=function(){if(C)return!1;var t=Sn("div");return"draggable"in t||"dragDrop"in t}();function Wn(){return!1}function On(t){if(null!=Nn)return Nn;var e=Sn("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return Mn(t,e),e.offsetWidth&&(Nn=e.offsetHeight-e.clientHeight),Nn||0}function En(t){var e;return null==Hn&&(e=Sn("span","​"),Mn(t,Sn("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Hn=e.offsetWidth<=1&&2<e.offsetHeight&&!S)),Hn?Sn("span","​"):Sn("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}c?Wn=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:s&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?Wn=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:L&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?Wn=function(t,e){var r=t.charCodeAt(e-1);return 8208<=r&&r<=8212}:L&&(Wn=function(t,e){if(1<e&&45==t.charCodeAt(e-1)){if(/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e)))return!0;if(2<e&&/[\d\.,]/.test(t.charAt(e-2))&&/[\d\.,]/.test(t.charAt(e)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var zn=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,r=[],n=t.length;e<=n;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),e+=l+1):(r.push(o),e=i+1)}return r}:function(t){return t.split(/\r\n?|\n/)};v.splitLines=zn;var In,Fn,Pn=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Rn="oncopy"in(In=Sn("div"))||(In.setAttribute("oncopy","return;"),"function"==typeof In.oncopy),Bn={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};function Gn(t){return t.level%2?t.to:t.from}function Vn(t){return t.level%2?t.from:t.to}function Kn(t){var e=Or(t);return e?Gn(e[0]):0}function Un(t){var e=Or(t);return e?Vn(dn(e)):t.text.length}function Xn(t,e){var r=Mr(t.doc,e),n=Je(t.doc,r);n!=r&&(e=Hr(n));var i=Or(n);return oe(e,i?(i[0].level%2?Un:Kn)(n):0)}function _n(t,e){for(var r,n,i,o,l,s=0;s<t.length;++s){var a=t[s];if(a.from<e&&a.to>e)return Fn=null,s;if(a.from==e||a.to==e){if(null!=r)return n=t,i=a.level,o=t[r].level,l=n[0].level,i==l||o!=l&&i<o?(Fn=r,s):(Fn=s,r);r=s}}return Fn=null,r}function Yn(t,e,r,n){if(!n)return e+r;for(;0<(e+=r)&&Ln.test(t.text.charAt(e)););return e}function jn(t,e,r,n){var i=Or(t);if(!i)return $n(t,e,r,n);for(var o=_n(i,e),l=i[o],s=Yn(t,e,l.level%2?-r:r,n);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return _n(i,s)==o?s:0<r==(l=i[o+=r]).level%2?l.to:l.from;if(!(l=i[o+=r]))return null;s=0<r==l.level%2?Yn(t,l.to,-1,n):Yn(t,l.from,1,n)}}function $n(t,e,r,n){var i=e+r;if(n)for(;0<i&&Ln.test(t.text.charAt(i));)i+=r;return i<0||i>t.text.length?null:i}v.keyNames=Bn,function(){for(var t=0;t<10;t++)Bn[t+48]=String(t);for(t=65;t<=90;t++)Bn[t]=String.fromCharCode(t);for(t=1;t<=12;t++)Bn[t+111]=Bn[t+63235]="F"+t}();var Zn,qn,Qn,Jn,ti,ei,ri,ni=(Zn="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",qn="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",Qn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Jn=/[stwN]/,ti=/[LRr]/,ei=/[Lb1n]/,ri=/[1n]/,function(t){if(!Qn.test(t))return!1;for(var e,r=t.length,n=[],i=0;i<r;++i)n.push(c=(e=t.charCodeAt(i))<=255?Zn.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1791?qn.charAt(e-1536):1792<=e&&e<=2220?"r":"L");for(var i=0,o="L";i<r;++i)"m"==(c=n[i])?n[i]=o:o=c;for(var i=0,l="L";i<r;++i)"1"==(c=n[i])&&"r"==l?n[i]="n":ti.test(c)&&"r"==(l=c)&&(n[i]="R");for(i=1,o=n[0];i<r-1;++i)"+"==(c=n[i])&&"1"==o&&"1"==n[i+1]?n[i]="1":","!=c||o!=n[i+1]||"1"!=o&&"n"!=o||(n[i]=o),o=c;for(i=0;i<r;++i)if(","==(c=n[i]))n[i]="N";else if("%"==c){for(var s=i+1;s<r&&"%"==n[s];++s);for(var a=i&&"!"==n[i-1]||s<r-1&&"1"==n[s]?"1":"N",u=i;u<s;++u)n[u]=a;i=s-1}for(i=0,l="L";i<r;++i){var c=n[i];"L"==l&&"1"==c?n[i]="L":ti.test(c)&&(l=c)}for(i=0;i<r;++i)if(Jn.test(n[i])){for(s=i+1;s<r&&Jn.test(n[s]);++s);for(var h="L"==(i?n[i-1]:"L"),f="L"==(s<r-1?n[s]:"L"),a=h||f?"L":"R",u=i;u<s;++u)n[u]=a;i=s-1}for(var d,p=[],i=0;i<r;)if(ei.test(n[i])){var g=i;for(++i;i<r&&ei.test(n[i]);++i);p.push({from:g,to:i,level:0})}else{var m=i,v=p.length;for(++i;i<r&&"L"!=n[i];++i);for(u=m;u<i;)if(ri.test(n[u])){m<u&&p.splice(v,0,{from:m,to:u,level:1});var y=u;for(++u;u<i&&ri.test(n[u]);++u);p.splice(v,0,{from:y,to:u,level:2}),m=u}else++u;m<i&&p.splice(v,0,{from:m,to:i,level:1})}return 1==p[0].level&&(d=t.match(/^\s+/))&&(p[0].from=d[0].length,p.unshift({from:0,to:d[0].length,level:0})),1==dn(p).level&&(d=t.match(/\s+$/))&&(dn(p).to-=d[0].length,p.push({from:r-d[0].length,to:r,level:0})),p[0].level!=dn(p).level&&p.push({from:r,to:r,level:p[0].level}),p});return v.version="3.20.0",v}();