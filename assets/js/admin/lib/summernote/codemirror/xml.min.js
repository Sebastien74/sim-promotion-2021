CodeMirror.defineMode("xml",function(t,e){var l,u,i,n,o,a=t.indentUnit,d=e.multilineTagIndentFactor||1,f=e.multilineTagIndentPastTag||!0,c=e.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1},s=e.alignCDATA;function m(e,r){function t(t){return(r.tokenize=t)(e,r)}var n=e.next();if("<"==n){if(e.eat("!"))return e.eat("[")?e.match("CDATA[")?t(p("atom","]]>")):null:e.match("--")?t(p("comment","--\x3e")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),t(function n(o){return function(t,e){for(var r;null!=(r=t.next());){if("<"==r)return e.tokenize=n(o+1),e.tokenize(t,e);if(">"==r){if(1!=o)return e.tokenize=n(o-1),e.tokenize(t,e);e.tokenize=m;break}}return"meta"}}(1))):null;if(e.eat("?"))return e.eatWhile(/[\w\._\-]/),r.tokenize=p("meta","?>"),"meta";var o,a=e.eat("/");for(l="";o=e.eat(/[^\s\u00a0=<>\"\'\/?]/);)l+=o;return l?(u=a?"closeTag":"openTag",r.tokenize=g,"tag"):"tag error"}if("&"!=n)return e.eatWhile(/[^&<]/),null;var i=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";");return i?"atom":"error"}function g(t,e){var r=t.next();if(">"==r||"/"==r&&t.eat(">"))return e.tokenize=m,u=">"==r?"endTag":"selfcloseTag","tag";if("="==r)return u="equals",null;if("<"!=r)return/[\'\"]/.test(r)?(e.tokenize=(n=r,a.isInAttribute=!0,a),e.stringStartCol=t.column(),e.tokenize(t,e)):(t.eatWhile(/[^\s\u00a0=<>\"\']/),"word");e.tokenize=m;var n,o=e.tokenize(t,e);return o?o+" error":"error";function a(t,e){for(;!t.eol();)if(t.next()==n){e.tokenize=g;break}return"string"}}function p(r,n){return function(t,e){for(;!t.eol();){if(t.match(n)){e.tokenize=m;break}t.next()}return r}}function r(){for(var t=arguments.length-1;0<=t;t--)i.cc.push(arguments[t])}function h(){return r.apply(null,arguments),!0}function x(){i.context&&(i.context=i.context.prev)}function k(t){if("openTag"==t)return i.tagName=l,i.tagStart=n.column(),h(C,(a=i.startOfLine,function(t){var e,r,n,o=i.tagName;return i.tagName=i.tagStart=null,"selfcloseTag"==t||"endTag"==t&&c.autoSelfClosers.hasOwnProperty(o.toLowerCase())?b(o.toLowerCase()):"endTag"==t&&(b(o.toLowerCase()),e=o,r=a,n=c.doNotIndent.hasOwnProperty(e)||i.context&&i.context.noIndent,i.context={prev:i.context,tagName:e,indent:i.indented,startOfLine:r,noIndent:n}),h()}));if("closeTag"!=t)return h();var e,a,r=!1;return i.context?i.context.tagName!=l&&(c.implicitlyClosed.hasOwnProperty(i.context.tagName.toLowerCase())&&x(),r=!i.context||i.context.tagName!=l):r=!0,r&&(o="error"),h((e=r,function(t){return e&&(o="error"),"endTag"==t?(x(),h()):(o="error",h(arguments.callee))}))}function b(t){for(var e;;){if(!i.context)return;if(e=i.context.tagName.toLowerCase(),!c.contextGrabbers.hasOwnProperty(e)||!c.contextGrabbers[e].hasOwnProperty(t))return;x()}}function C(t){return"word"==t?(o="attribute",h(w,C)):"endTag"==t||"selfcloseTag"==t?r():(o="error",h(C))}function w(t){if("equals"==t)return h(T,C);if(c.allowMissing){if("word"==t)return o="attribute",h(w,C)}else o="error";return("endTag"==t||"selfcloseTag"==t?r:h)()}function T(t){return"string"==t?h(z):"word"==t&&c.allowUnquoted?(o="string",h()):(o="error",("endTag"==t||"selfCloseTag"==t?r:h)())}function z(t){return"string"==t?h(z):r()}return{startState:function(){return{tokenize:m,cc:[],indented:0,startOfLine:!0,tagName:null,tagStart:null,context:null}},token:function(t,e){if(!e.tagName&&t.sol()&&(e.startOfLine=!0,e.indented=t.indentation()),t.eatSpace())return null;o=u=l=null;var r=e.tokenize(t,e);if(e.type=u,(r||u)&&"comment"!=r)for(i=e,n=t;;){if((e.cc.pop()||k)(u||r))break}return e.startOfLine=!1,o&&(r="error"==o?r+" error":o),r},indent:function(t,e,r){var n=t.context;if(t.tokenize.isInAttribute)return t.stringStartCol+1;if(t.tokenize!=g&&t.tokenize!=m||n&&n.noIndent)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return f?t.tagStart+t.tagName.length+2:t.tagStart+a*d;if(s&&/<!\[CDATA\[/.test(e))return 0;for(n&&/^<\//.test(e)&&(n=n.prev);n&&!n.startOfLine;)n=n.prev;return n?n.indent+a:0},electricChars:"/",blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:e.htmlMode?"html":"xml",helperType:e.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0});